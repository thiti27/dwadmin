if (self.CavalryLogger) { CavalryLogger.start_js(["N6RZA"]); }

__d("MessengerDotComPromotionActionURL",[],(function(a,b,c,d,e,f){e.exports={turn_on_notification:"TurnOnNotification",messengerdotcom_cell_cutover_qp:"messengerdotcomCellCutoverQp"}}),null);
__d("SRDevModeParams",[],(function(a,b,c,d,e,f){e.exports={items:["__spin_r","__spin_b","__spin_t","__spin_dev_mhenv"],escapeParam:"reset_spin"}}),null);
__d("MessengerMuteUtils.bs",["fbt","formatDate","DateStrings"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();if(a>0)if(a<86401)return void 0;else{var c=new Date(a*1e3).getDay(),d=c===new Date().getDay(),e=c===new Date().getDay()+1;if(e)return g._("\u0e1b\u0e34\u0e14\u0e08\u0e19\u0e16\u0e36\u0e07\u0e1e\u0e23\u0e38\u0e48\u0e07\u0e19\u0e35\u0e49\u0e40\u0e27\u0e25\u0e32 {time}",[g._param("time",b("formatDate")(a,"g:ia"))]);else if(d)return g._("\u0e1b\u0e34\u0e14\u0e08\u0e19\u0e16\u0e36\u0e07 {time}",[g._param("time",b("formatDate")(a,"g:ia"))]);else return g._("\u0e1b\u0e34\u0e14\u0e08\u0e19\u0e16\u0e36\u0e07{weekday name} \u0e40\u0e27\u0e25\u0e32 {time}",[g._param("time",b("formatDate")(a,"g:ia")),g._param("weekday name",b("DateStrings").getWeekdayName(c))])}else if(a===-1)return g._("\u0e1b\u0e34\u0e14\u0e44\u0e21\u0e48\u0e21\u0e35\u0e01\u0e33\u0e2b\u0e19\u0e14");else return void 0}f.mutedUntilLabel=a}),null);
__d("MeasurePeopleTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MeasurePeopleLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={time:!0,weight:!0};e.exports=a}),null);
__d("MessengerBotsWebTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerBotsWebLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setCount=function(a){this.$1.count=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIndex=function(a){this.$1.index=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPayload=function(a){this.$1.payload=a;return this};c.setQrContentType=function(a){this.$1.qr_content_type=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setTitle=function(a){this.$1.title=a;return this};c.setTitles=function(a){this.$1.titles=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setType=function(a){this.$1.type=a;return this};c.setURL=function(a){this.$1.url=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={count:!0,event:!0,index:!0,page_id:!0,payload:!0,qr_content_type:!0,time:!0,title:!0,titles:!0,type:!0,url:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerPlatformClientTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerPlatformClientLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.appid=a;return this};c.setAppversion=function(a){this.$1.appversion=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setClienttime=function(a){this.$1.clienttime=a;return this};c.setCountry=function(a){this.$1.country=a;return this};c.setDeviceid=function(a){this.$1.deviceid=a;return this};c.setExtraClientData=function(a){this.$1.extra_client_data=a;return this};c.setIsemployee=function(a){this.$1.isemployee=a;return this};c.setLoggingToken=function(a){this.$1.logging_token=a;return this};c.setName=function(a){this.$1.name=a;return this};c.setRawclienttime=function(a){this.$1.rawclienttime=a;return this};c.setSessionid=function(a){this.$1.sessionid=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={appid:!0,appversion:!0,client_userid:!0,clienttime:!0,country:!0,deviceid:!0,extra_client_data:!0,isemployee:!0,logging_token:!0,name:!0,rawclienttime:!0,sessionid:!0,thread_id:!0,time:!0,weight:!0};e.exports=a}),null);
__d("WorkChatActivityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkChatActivityLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAppID=function(a){this.$1.app_id=a;return this};c.setAppVersion=function(a){this.$1.app_version=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setGroupID=function(a){this.$1.group_id=a;return this};c.setHscrollPosition=function(a){this.$1.hscroll_position=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setThreadIds=function(a){this.$1.thread_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={app_id:!0,app_version:!0,event:!0,group_id:!0,hscroll_position:!0,message_id:!0,thread_ids:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("WorkDoNotDisturbSettingsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkDoNotDisturbSettingsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setOption=function(a){this.$1.option=a;return this};c.setSource=function(a){this.$1.source=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,option:!0,source:!0,time:!0,weight:!0};e.exports=a}),null);
__d("WorkQuickChatTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:WorkQuickChatLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:WorkQuickChatLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:WorkQuickChatLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setActionType=function(a){this.$1.action_type=a;return this};c.setLocation=function(a){this.$1.location=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setThreadID=function(a){this.$1.thread_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={action_type:!0,location:!0,message_id:!0,thread_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("ChatFlyoutPlaceholder.react",["React","XUISpinner.react"],(function(a,b,c,d,e,f){"use strict";var g={padding:"30px",textAlign:"center"};a=function(){return b("React").createElement("div",{style:g},b("React").createElement(b("XUISpinner.react"),{size:"large"}))};e.exports=a}),null);
__d("MessengerApprovalQueueUtils",["MercuryIDs","MessengerAdminGroupUtils","MessengerParticipants.re","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={getApprovalQueueParticipants:function(a,c){__p&&__p();var d=this;if(!a)return;if(b("MessengerAdminGroupUtils").isAdminRequired(a)){var e=a.group_approval_queue&&a.group_approval_queue.map(function(a){return[b("MercuryIDs").getParticipantIDFromUserID(a.requester.id),a]}),f=e&&new Map(e);f&&b("MessengerParticipants.re").getMulti(Array.from(f.keys()),function(a){a=Object.values(a);a=a;c(b("immutable").Map(a.map(function(a){return[a.id,d._constructApprovalRequestInfo(a,f)]})))})}else a.approval_queue_ids&&b("MessengerParticipants.re").getMulti(a.approval_queue_ids,function(a){c(b("immutable").Map(a))})},_constructApprovalRequestInfo:function(a,b){b=b.get(a.id);return{fbid:a.fbid,id:a.id,image_src:a.image_src,is_messenger_user:!!a.is_messenger_user,name:a.name,inviter_id:b&&b.inviter.id,requester_id:b&&b.requester.id,request_source:b&&Number(b.request_source),request_timestamp:b&&b.request_timestamp}}};e.exports=a}),null);
__d("MessengerNotificationBanner.react",["cx","ix","AsyncRequest","Bootloader","CurrentUser","Image.react","MessengerButtonReact.re","MessengerDotComPromotionActionURL","MessengerSettingsActions","MessengerSignals.bs","QuickPromotionActionType","React","XMessengerDotComNUXLoggingController","XQuickPromotionSimpleLoggingController","goURI","nullthrows"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerButtonReact.re").make;a=b("React").PropTypes;var j=h("86832"),k=h("86833"),l=h("600634");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={bannerClosed:!1},d.$5=function(){d.$6(),d.props.promotionID?(new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action","primary").setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send(),d.props.primaryActionURI===b("MessengerDotComPromotionActionURL").turn_on_notification?b("MessengerSettingsActions").changeDesktopNotifs(!0):d.props.primaryActionType===b("QuickPromotionActionType").DIALOG_URL?b("Bootloader").loadModules(["AsyncDialog"],function(a){a.send(new(b("AsyncRequest"))().setURI(b("nullthrows")(d.props.primaryActionURI)))},"MessengerNotificationBanner.react"):window.open(d.props.primaryActionURI)):d.props.primaryActionURI?b("goURI")(d.props.primaryActionURI,!0):d.props.primaryActionCallback&&d.props.primaryActionCallback()},d.$2=function(){d.$6(),d.props.promotionID&&new(b("AsyncRequest"))().setURI(b("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",d.props.promotionID).setEnum("qp_action","dismiss").setStringToStringMap("qp_instance_log_data",d.props.instanceLogData).getURI()).send()},d.$6=function(){d.setState({bannerClosed:!0},function(){b("MessengerSignals.bs").resize()})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.promotionID||this.setState({bannerClosed:!1})};d.componentDidMount=function(){if(this.$1()||!this.props.promotionID||b("CurrentUser").isWorkUser())return;new(b("AsyncRequest"))().setURI(b("XMessengerDotComNUXLoggingController").getURIBuilder().setInt("promotion_id",this.props.promotionID).setStringToStringMap("instance_log_data",this.props.instanceLogData).getURI()).send()};d.componentDidUpdate=function(){window.dispatchEvent(new Event("resize"))};d.render=function(){return this.$1()?null:b("React").createElement("div",{className:"_2cij"},b("React").createElement(b("Image.react"),{className:"_2cik",onClick:this.$2,src:j}),b("React").createElement(b("Image.react"),{className:"_2cil",src:this.$3()}),this.props.promotionContent," ",this.$4())};d.$1=function(){return this.state.bannerClosed};d.$3=function(){return(this.props.primaryActionURI||"").indexOf("/privacy/response")>-1?l:k};d.$4=function(){return b("React").createElement(i,{className:"_2cim",label:this.props.primaryActionTitle,onClick:this.$5,type:"primary"})};return c}(b("React").Component);c.propTypes={promotionID:a.number,promotionContent:a.string,primaryActionTitle:a.string,primaryActionType:a.string,primaryActionURI:a.string,primaryActionCallback:a.func,instanceLogData:a.object};e.exports=c}),null);
__d("MessengerRefreshPrompt",["fbt","CurrentUser","MessengerPromotionDataActions","Visibility","setIntervalAcrossTransitions"],(function(a,b,c,d,e,f,g){var h=1e3*60*60,i=1e3*60*60*24*3;a=function(){var a=Date.now();b("setIntervalAcrossTransitions")(function(){var c=b("CurrentUser").isWorkUser()?g._("Workplace Chat \u0e40\u0e27\u0e2d\u0e23\u0e4c\u0e0a\u0e31\u0e48\u0e19\u0e43\u0e2b\u0e21\u0e48\u0e1e\u0e23\u0e49\u0e2d\u0e21\u0e43\u0e2b\u0e49\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e41\u0e25\u0e49\u0e27"):g._("Messenger \u0e40\u0e27\u0e2d\u0e23\u0e4c\u0e0a\u0e31\u0e19\u0e43\u0e2b\u0e21\u0e48\u0e1e\u0e23\u0e49\u0e2d\u0e21\u0e43\u0e2b\u0e49\u0e1a\u0e23\u0e34\u0e01\u0e32\u0e23\u0e41\u0e25\u0e49\u0e27");Date.now()-a>i&&b("Visibility").once(b("Visibility").VISIBLE,function(){b("MessengerPromotionDataActions").setPromotionData({promotionID:null,promotionContent:c,primaryActionTitle:g._("\u0e23\u0e35\u0e40\u0e1f\u0e23\u0e0a"),instanceLogData:{},primaryActionURI:window.location.href}),a=Date.now()})},h)};e.exports=a}),null);
__d("MessengerBanner.react",["MessengerNotificationBanner.react","MessengerPromotionDataDispatcher","MessengerPromotionDataStore","MessengerRefreshPrompt","React","SubscriptionsHandler","WorkplaceChatUpsellBanner.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={promotionData:b("MessengerPromotionDataStore").getPromotionData()},d.subscriptions=new(b("SubscriptionsHandler"))(),c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;b("MessengerRefreshPrompt")();b("MessengerPromotionDataDispatcher").explicitlyRegisterStores([b("MessengerPromotionDataStore")]);this.subscriptions.addSubscriptions(b("MessengerPromotionDataStore").addListener(function(){a.setState({promotionData:b("MessengerPromotionDataStore").getPromotionData()})}))};d.componentWillUnmount=function(){this.subscriptions.release()};d.render=function(){var a=this.state.promotionData;if(this.props.showWorkchatUpsellBanner)return b("React").createElement(b("WorkplaceChatUpsellBanner.react"),null);return a?b("React").createElement(b("MessengerNotificationBanner.react"),{promotionID:a.promotionID,promotionContent:a.promotionContent,primaryActionTitle:a.primaryActionTitle,primaryActionType:a.primaryActionType,primaryActionURI:a.primaryActionURI,primaryActionCallback:a.primaryActionCallback,instanceLogData:a.instanceLogData}):null};return c}(b("React").PureComponent);c.propTypes={showWorkchatUpsellBanner:a.bool,isFirstRedirect:a.bool};e.exports=c}),null);
__d("MessengerComposerButtonLabels",["fbt"],(function(a,b,c,d,e,f,g){"use strict";a={QuickCamButtonLabel:g._("\u0e16\u0e48\u0e32\u0e22\u0e20\u0e32\u0e1e\u0e42\u0e14\u0e22\u0e43\u0e0a\u0e49\u0e01\u0e25\u0e49\u0e2d\u0e07\u0e14\u0e48\u0e27\u0e19"),VoiceClipButtonLabel:g._("\u0e2a\u0e48\u0e07\u0e04\u0e25\u0e34\u0e1b\u0e40\u0e2a\u0e35\u0e22\u0e07"),EmojiButtonLabel:g._("\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2d\u0e35\u0e42\u0e21\u0e08\u0e34"),StickerButtonLabel:g._("\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e2a\u0e15\u0e34\u0e01\u0e40\u0e01\u0e2d\u0e23\u0e4c"),GroupPollingButtonLabel:g._("\u0e2a\u0e23\u0e49\u0e32\u0e07\u0e42\u0e1e\u0e25\u0e25\u0e4c"),ContentSearchButtonLabel:g._("\u0e40\u0e25\u0e37\u0e2d\u0e01 GIF")};e.exports=a}),null);
__d("DebouncedMentionsTextEditor.react",["AbstractMentionsTextEditor.react","clearImmediate","debounce","setImmediate"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.__maybeSearch=function(){var a=d.props.editorState,c=a.getSelection();if(c.getHasFocus()&&c.isCollapsed()){var e=a.getCurrentContent();a=d.props;var f=a.mentionsSource,g=a.assistantTypeaheadSource;(f||g)&&(d.$DebouncedMentionsTextEditor1&&b("clearImmediate")(d.$DebouncedMentionsTextEditor1),d.$DebouncedMentionsTextEditor1=b("setImmediate")(function(){f&&f.search(e,c,d.__onShowMentions),g&&g.search(e,c,d.__onShowMentions)}))}};d.__debouncedSearch=b("debounce")(d.__maybeSearch,50);return d}var d=c.prototype;d.componentDidUpdate=function(a){this.props.editorState!==a.editorState&&this.__debouncedSearch()};d.componentWillUnmount=function(){this.$DebouncedMentionsTextEditor1&&b("clearImmediate")(this.$DebouncedMentionsTextEditor1),a.prototype.componentWillUnmount.call(this)};return c}(b("AbstractMentionsTextEditor.react"));e.exports=a}),null);
__d("MessengerSingleSectionContactList.react",["cx","MessengerContactAdapters","MessengerContactList.react","MessengerTypeaheadUtils","React","TypeaheadViewPropTypes","joinClasses","wrapNullableForReact"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props,c=a.entries;a=a.viewProps;var d=(c.length?"":"_599s")+" _29hl _8i1 _11_d _4p-s";return b("React").createElement(b("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:b("joinClasses")(this.props.className,d,a.className),contactAdapter:b("MessengerContactAdapters").fromSearchableEntry,hasHoverState:!0,highlightedEntry:b("wrapNullableForReact")(this.props.highlightedEntry),isLoading:!1,listSections:b("MessengerTypeaheadUtils").buildSingleSection(c),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:a.viewer})};return c}(b("React").PureComponent);a.propTypes=b("TypeaheadViewPropTypes");a.defaultProps={role:"listbox"};e.exports=a}),null);
__d("MessengerURLUploader",["Event","MessengerActions","SubscriptionsHandler","URLMatcher","requireCond","cr:988286","debounce"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a,c,d){__p&&__p();var e=this;this.handleInputValueChange=function(a){a=e.$1();a=b("URLMatcher").match(a)||(b("cr:988286")!=null?b("cr:988286").matchTaskNumber(a)||b("cr:988286").matchDiffNumber(a):null);a&&(e.$3!==a&&(e.$3=a,b("MessengerActions").loadingPreview(e.$5,a)))};this.$1=a;this.$4=new(b("SubscriptionsHandler"))();this.$5=d;this.$2=b("debounce")(this.handleInputValueChange,200);this.initInput(c)}var c=a.prototype;c.getMatchedURL=function(){return this.$3};c.initInput=function(a){this.$4.addSubscriptions(b("Event").listen(a,"keyup",this.$2),b("Event").listen(a,"paste",this.$2))};c.setThreadID=function(a){this.$5=a};c.clearShareData=function(){this.$3=null};return a}();e.exports=a}),null);
__d("MessengerComposerInput.react",["cx","fbt","requireCond","cr:1008504","AutocompleteSearchSource","AutocompleteStrategy","Bootloader","CompositeDraftDecorator","CurrentUser","DebouncedMentionsTextEditor.react","DocumentCompositeMentionsSource","DocumentMentionsSource","DOMDimensions","DraftModifier","EditorState","EmojiFormat.bs","Event","LogHistory","MentionsLayer.react","MercuryIDs","MercuryThreadIDMap","MercuryThreadSnippet.react","MercuryThreadTitleSafe.react","MercuryTimestamp","MessengerActions","MessengerBotMenuButton.react","MessengerComposerInputStore","MessengerConstants","MessengerDomIDs.bs","MessengerDotComAndInboxM4Check.bs","MessengerEditorStateManager","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerMentionSource","MessengerSingleSectionContactList.react","MessengerTabIndices","MessengerUploadFilesUtil.bs","MessengerURLUploader","MessengerUserInputAppDispatcher","MessengerUserInputUtils","React","ReactDOM","Run","TypingDetectorController","WorkGalahadSettings","clearImmediate","createMentionsSearchSourceFromParticipants","createMessengerMentionDraftEntity","createMessengerMentionTypeaheadDraftEntity","debounce","getEntityMatcher","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","gkx","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","immutable","insertEmoticonIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","joinClasses","replaceMentionedTextInEditorState","setImmediate","shouldNotRenderSegoe","throttle","withMessengerSource","cr:996047"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerDomIDs.bs").ids;a=b("React").PropTypes;var j=1,k=/^image\//,l="handled",m=8,n="not-handled",o=b("LogHistory").getInstance("MessengerComposerInput"),p={};p[b("MessengerConstants").NEW_THREAD_KEY]={version:0,editorState:b("EditorState").createEmpty()};function q(a,c){var d=c.editorState,e=c.version;if(!a||a&&e<p[a].version)return;p[a]=c;a!==b("MessengerConstants").NEW_THREAD_KEY&&b("MessengerEditorStateManager").set(a,d)}function r(a){p[a]||(p[a]={version:0,editorState:b("EditorState").createEmpty()});return p[a]}function s(a,b){if(!a)return null;var c=r(a);c.editorState=b;p[a]=c;return c}function t(a,b){if(a){var c=r(a);c.version+=1;c.editorState=b;q(a,c)}}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.$10=!1;d.$20=function(a){if(d.$10&&a!==d.state.editorState){d.setState({editorState:a});a=s(d.props.threadID,a);a&&d.$5(d.props.threadID,a);d.props.onResize&&d.props.onResize()}};d.$21=function(a,c){if(b("isSoftNewlineEvent")(a)){a=b("handleSoftNewlineForMessengerEmoticon");a=a(c);d.setState({editorState:a});s(d.props.threadID,a);return l}d.setState({},d.triggerSend);return l};d.getValue=function(){return b("getVisibleValueForContentStateWithMessengerEmoji")(d.state.editorState.getCurrentContent())};d.focus=function(){d.refs.input&&d.refs.input.focus()};d.$29=function(a,b){d.props.onBeforeInput&&d.props.onBeforeInput(a,b);var c=d.$34(a,b);a=d.$35(a,b);return c||a?l:n};d.$12=function(a){a=d.props.handleOnlyImageUploads?a.filter(function(a){return a&&k.test(a.type)}):a;var c=d.$24();if(a.length){b("MessengerActions").prepareFilesForSend(c,a,"Copy");return l}return n};d.$30=function(a,c,e){b("cr:996047")!=null&&b("cr:996047")(d.props.threadID,a);return!1};d.$17=function(){var a=d.props.threadID;if(!a)return;q(a,r(a))};d.$18=function(){d.setState(d.$13(!0))};d.triggerSend=function(){d.$22()&&d.$25();if(d.getValue().trim().length>0||d.$36())if(d.props.thread){var a=d.getMentions(d.props.thread.thread_fbid);d.$26(a)}else d.$26();d.props.onWorkChatContentAppsSend!=null&&d.props.onWorkChatContentAppsSend()};d.$31=function(){var a=(d.state.addedMentionsCount||0)+1;d.setState({addedMentionsCount:a})};d.$32=function(a,c){a=(d.state.mentionsTriggeredCount||0)+1;a={mentionsTriggeredCount:a};d.state.mentionsTriggerSource||(a.mentionsTriggerSource=c===j?b("MessengerMentionSource").ATSIGN:b("MessengerMentionSource").TYPEAHEAD);d.setState(a)};d.$12=d.$12.bind(babelHelpers.assertThisInitialized(d));d.$11=c;d.state=d.$13();d.$6=b("debounce")(function(a){d.$11||(d.$11=a),u(d.props,d.$11)&&d.$14(),d.$11=a},300);d.$7=b("throttle")(function(){if(d.$10){var a=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d))).height;d.$1!==a&&(d.props.onResize&&d.props.onResize());d.$1=a}},100);return d}var d=c.prototype;d.$13=function(a){var c;this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?c=r(b("MessengerConstants").NEW_THREAD_KEY).editorState:c=b("MessengerEditorStateManager").get(this.props.threadID);c=this.$15(c,a);a=b("createMessengerMentionDraftEntity");return{editorState:c,mentionCreationForContentStateFn:a}};d.componentDidMount=function(){__p&&__p();this.$10=!0;var a=b("gkx")("964442");a&&b("MessengerUserInputAppDispatcher").explicitlyRegisterStore(b("MessengerComposerInputStore"));this.$1=b("DOMDimensions").getElementDimensions(b("ReactDOM").findDOMNode(this)).height;this.$16();this.$2=new(b("MessengerURLUploader"))(this.getValue,b("ReactDOM").findDOMNode(this.refs.input),this.props.threadID);b("Run").onUnload(this.$17);this.$3=b("Event").listen(window,"blur",this.$17);this.$4=b("Event").listen(window,"focus",this.$18);this.$5=b("debounce")(function(a,b){q(a,b)},1e3)};d.componentDidUpdate=function(a,c){this.$9=b("setImmediate")(this.$7);if(c.editorState!==this.state.editorState){this.props.onChange&&this.props.onChange(this.getValue());c=b("gkx")("964442");c&&this.$19(this.getValue())}this.props.threadID!==a.threadID?this.$16():this.$6(a)};d.componentWillUnmount=function(){var a=this.props.threadID;a&&q(a,r(a));this.$10=!1;this.$8&&this.$8.destroy();this.$9&&b("clearImmediate")(this.$9);this.$3&&this.$3.remove();this.$4&&this.$4.remove()};d.insertEmoticon=function(a){a=b("insertEmoticonIntoEditorState")(a,this.state.editorState);a!==this.state.editorState&&this.$20(a)};d.insertEmoji=function(a){var c=this.state.editorState;a=b("insertMessengerEmojiIntoContentState")(b("EmojiFormat.bs").codeArrayToCodeString(a),c.getCurrentContent(),c.getSelection(),c.getCurrentInlineStyle());c=b("EditorState").push(c,a,"insert-characters");c!==this.state.editorState&&this.$20(b("EditorState").forceSelection(c,a.getSelectionAfter()))};d.$22=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};d.$16=function(){if(!this.$10)return;this.setState(this.$13(!1));this.$23();this.$2&&(this.$2.setThreadID(this.props.threadID),this.$2.clearShareData());this.$14()};d.$14=function(a){__p&&__p();var c=this;if(a){var d=this.props,e=d.participants,f=d.viewer;b("Bootloader").loadModules(["createAssistantTypeaheadSearchSource"],function(a){c.setState({assistantTypeaheadSource:a(f,e&&e.toArray(),c.props.thread,c.props.pageID)})},"MessengerComposerInput.react")}if(this.props.mentionsEnabled){d=this.props;var g=d.participants,h=d.viewer;d=d.thread;this.setState({isUserInputAutocomplete:!1,mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionsSource:b("createMentionsSearchSourceFromParticipants")(h,g&&g.toArray(),d,b("gkx")("678578"),a)})}};d.$23=function(){this.$8&&this.$8.destroy();this.$8=null;var a=this.props.viewer;if(!a)return;var c=b("ReactDOM").findDOMNode(this.refs.input);this.props.threadID!==b("MessengerConstants").NEW_THREAD_KEY&&c&&(this.$8=new(b("TypingDetectorController"))(this.props.thread,b("MercuryIDs").getUserIDFromThreadID(this.props.threadID),c,this.props.source,null,b("MercuryThreadIDMap").getForFBID(a).getServerIDFromClientIDNow(this.props.threadID),this.getValue))};d.$24=function(){var a=this.props,c=a.threadID;a=a.thread;if(!b("MercuryIDs").isValidThreadID(c)){if(a)return a.thread_id;o.debug("Invalid threadID ",c)}return c};d.$19=function(a){__p&&__p();if(!this.$10)return;a=b("MessengerComposerInputStore").getState();var c=a.requestNumResults,d=a.requestType;if(a.isUserInputRequested&&c&&d){a=new(b("AutocompleteSearchSource"))(this.getValue(),c,d);c=new(b("DocumentMentionsSource"))(b("AutocompleteStrategy"),a);d=new(b("DocumentCompositeMentionsSource"))([c]);this.setState({isUserInputAutocomplete:!0,mentionCreationForContentStateFn:b("MessengerUserInputUtils"),mentionsSource:d})}else if(this.state.isUserInputAutocomplete){a=this.props;c=a.participants;d=a.viewer;a=a.thread;this.setState({isUserInputAutocomplete:!1,mentionCreationForContentStateFn:b("createMessengerMentionDraftEntity"),mentionsSource:b("createMentionsSearchSourceFromParticipants")(d,c&&c.toArray(),a,b("gkx")("678578"))})}};d.$25=function(){var a=this.props.fileUploader,c=this.$24();a&&(o.debug("Before send files to thread ",c),b("MessengerUploadFilesUtil.bs").sendAttchments(a,this.props.onFileUpload),o.debug("Before clean files for thread ",c),b("MessengerActions").cleanFiles(c))};d.$26=function(a){__p&&__p();var c=this;if(this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:a},function(d){b("MessengerActions").removeSharePreview(c.props.threadID);if(d&&c.props.mentionsEnabled&&(a&&a.length||c.state.addedMentionsCount||c.state.mentionsTriggeredCount||c.state.mentionsTriggerSource)){var e=c.state,f=e.addedMentionsCount,g=e.mentionsTriggeredCount,h=e.mentionsTriggerSource;e=c.props;var i=e.thread,j=e.participants,k=d;b("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(c,d){new c().setEvent(d.MENTION).setGroupSize(j&&j.size).setNumDelivered(a&&a.length||0).setNumSelects(f).setNumTriggers(g).setThreadid(i&&i.thread_id).setThreadType(b("getThreadTypeNameFromThreadType")(i&&i.thread_type)).setOfflineThreadid(k.offline_threading_id).updateExtraData({source:h}).log()},"MessengerComposerInput.react")}})){var d=this.$15(b("EditorState").createEmpty());this.$2&&this.$2.clearShareData();this.setState({editorState:d,addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null});t(this.props.threadID,d);this.$8&&this.$8.resetState()}};d.getMentions=function(a){return b("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),a)};d.getInput=function(){return this.refs.input};d.render=function(){__p&&__p();var a=this.props,c=a.participants,d=a.thread;a=a.viewer;var e=null;c&&d&&a?e=h._("\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e01\u0e31\u0e1a {participantListAsShownInThreadList} \u0e2d\u0e31\u0e1e\u0e40\u0e14\u0e15\u0e40\u0e21\u0e37\u0e48\u0e2d {lastUpdatedTime} \u0e42\u0e14\u0e22 {recentUpdateStringAsShownInThreadList}",[h._param("participantListAsShownInThreadList",this.$27(d,a)),h._param("lastUpdatedTime",b("MercuryTimestamp").getAbsoluteTimestamp(d.timestamp)),h._param("recentUpdateStringAsShownInThreadList",this.$28(c,d,a))]):e=h._("\u0e01\u0e32\u0e23\u0e40\u0e02\u0e35\u0e22\u0e19\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e43\u0e2b\u0e21\u0e48");c=null;this.props.threadID&&this.props.pageID&&(c=b("React").createElement("div",{ref:"botsMenuContainer",className:"_3km1"},b("React").createElement(b("MessengerBotMenuButton.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"})));d="";this.props.disableInput?d=h._("\u0e1b\u0e34\u0e14\u0e43\u0e0a\u0e49\u0e07\u0e32\u0e19\u0e01\u0e32\u0e23\u0e40\u0e02\u0e35\u0e22\u0e19\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e2a\u0e33\u0e2b\u0e23\u0e31\u0e1a\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e19\u0e35\u0e49").toString():this.props.thread&&!this.props.thread.is_canonical?d=h._("\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21 \u0040name...").toString():d=h._("\u0e1e\u0e34\u0e21\u0e1e\u0e4c\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21...").toString();a=b("gkx")("678612");var f=b("cr:1008504")!==null&&b("CurrentUser").isWorkUser()?b("cr:1008504"):b("DebouncedMentionsTextEditor.react");return b("React").createElement("div",{className:b("joinClasses")("_kmc"+(b("gkx")("834752")&&b("MessengerDotComAndInboxM4Check.bs").yes?" _7kpg":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyx":"")+(this.props.smallerEqual640?" _2swd":"")+(b("shouldNotRenderSegoe")(this.state.editorState.getCurrentContent().getPlainText())?" _2por":"")+" navigationFocus",this.props.className),onClick:this.focus,role:"presentation"},this.props.showMenu?c:null,b("React").createElement("div",{className:b("joinClasses")((b("gkx")("834752")&&b("MessengerDotComAndInboxM4Check.bs").yes?"":"_3-8x")+(b("WorkGalahadSettings").isGalahadEnabled?" _7q9o":"")+(this.props.showMenu?" _3km3":"")+(a?"":" _3oh-"),this.props.inputContainerClassName)},b("React").createElement(f,{autoHighlight:!0,ariaControls:i.CONVERSATION,ariaDescribedBy:i.COMPOSER_INPUT_DESCRIPTION,ariaLabel:d,editorState:this.state.editorState,handleBeforeInput:this.$29,handleContentReturn:this.$21,handlePastedFiles:this.$12,handlePastedText:this.$30,handleReturn:this.$21,maxResults:m,readOnly:this.props.disableInput,mentionCreationForContentStateFn:this.state.mentionCreationForContentStateFn,mentionTypeaheadCreationForContentStateFn:b("createMessengerMentionTypeaheadDraftEntity"),mentionResultsComponent:b("MentionsLayer.react"),mentionResultsProps:{typeaheadView:b("MessengerSingleSectionContactList.react"),typeaheadViewProps:{className:"_13iv",viewer:this.props.viewer},position:"above",autoflip:!0},mentionsSource:this.state.mentionsSource,assistantTypeaheadSource:this.state.assistantTypeaheadSource,onChange:this.$20,placeholder:d,ref:"input",spellCheck:!0,stripPastedStyles:!0,tabIndex:this.props.threadID===b("MessengerConstants").NEW_THREAD_KEY?b("MessengerTabIndices").COMPOSER_INPUT:0,textAlignment:"left",onAddMention:this.$31,onShowMentions:this.$32}),b("React").createElement("div",{className:"_5ca7",id:i.COMPOSER_INPUT_DESCRIPTION},e)))};d.$27=function(a,c){return b("React").createElement(b("MercuryThreadTitleSafe.react"),{thread:a,viewer:c})};d.$28=function(a,c,d){return b("React").createElement(b("MercuryThreadSnippet.react"),{participants:a,shouldAlwaysRenderSender:!0,shouldRenderYou:!0,thread:c,viewer:d})};d.$15=function(a,c){var d=this.$33(a);a=b("EditorState").set(a,{decorator:d});return c||this.props.disableAutofocus?a:b("EditorState").moveFocusToEnd(a)};d.$33=function(a){var c=b("MessengerEmoticonSpan.react");a=a.getCurrentContent();c=[{strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOTICON"},a.getEntity),component:c}];c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="EMOJI"},a.getEntity),component:b("MessengerEmojiSpan.react")});c.push({strategy:b("getEntityMatcher")(function(a){return a.getType()==="MENTION"},a.getEntity),component:b("MessengerMentionsEntityDecorator.react")});return new(b("CompositeDraftDecorator"))(c)};d.$34=function(a,c){a=b("handleBeforeInputForMessengerEmoticon")(c,a);if(a===c)return!1;this.setState({editorState:a});s(this.props.threadID,a);return!0};d.$35=function(a,c){a=b("handleBeforeInputForMessengerEmoji")(c,a);if(a===c)return!1;this.setState({editorState:a});s(this.props.threadID,a);return!0};d.handleTextDropped=function(a){var c=this.state.editorState,d=c.getSelection();if(d.get("hasFocus"))return;d=b("DraftModifier").replaceText(c.getCurrentContent(),d,a,c.getCurrentInlineStyle());a=b("EditorState").push(c,d,"insert-fragment");this.$20(a)};d.getShareData=function(){var a=this.props.sharePreview;return a&&a.type&&a.params?{share_type:a.type,share_params:a.params.get("data")}:null};d.exitCurrentMode=function(){this.refs.input&&this.refs.input.exitCurrentMode()};d.$36=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};d.addMention=function(a){a=b("replaceMentionedTextInEditorState")(a,this.state.editorState,0,b("createMessengerMentionDraftEntity"));this.state.mentionsTriggerSource||this.setState({mentionsTriggerSource:b("MessengerMentionSource").REPLY});this.$20(a);this.$31()};return c}(b("React").PureComponent);c.propTypes={disableAutofocus:a.bool,fileUploader:a.object,handleOnlyImageUploads:a.bool.isRequired,isComposing:a.bool,mentionsEnabled:a.bool,pageID:a.string,participants:a.instanceOf(b("immutable").Map),sharePreview:a.object,showMenu:a.bool,disableInput:a.bool,smallerEqual640:a.bool,thread:a.object,threadID:a.string,viewer:a.string,onBeforeInput:a.func,onChange:a.func,onFileUpload:a.func,onResize:a.func,onMessageSend:a.func,onWorkChatContentAppsSend:a.func};function u(a,b){a=a.participants;b=b.participants;if(!a||!b)return!0;if(a===b)return!1;a=a.filter(Boolean);b=b.filter(Boolean);return a.size!==b.size||!a.equals(b)}e.exports=b("withMessengerSource")(c,!0)}),null);
__d("MessengerComposerPendingActions.react",["Bootloader","CurrentUser","JSResource","MercuryIDs","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerDialogs.bs","MessengerMessageRequestsTypedLogger","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("lazyLoadComponent")(b("JSResource")("MessengerPendingActions.react").__setRef("MessengerComposerPendingActions.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$1=null,c.$2=null,b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentWillUnmount=function(){this.$1&&this.$1.remove(),this.$2&&this.$2.remove()};d.render=function(){__p&&__p();var a=this,c=this.props.thread,d=!!c&&b("MessageRequestUtils").isFiltered(c);c=b("CurrentUser").getID();var e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,c),f=b("MercuryThreadActions").getForFBID(this.props.viewer);return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",{style:{height:51}})},b("React").createElement(g,{folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){f.changeFolder(a.props.threadID,b("MessagingTag").INBOX),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType(d?"other":"pending").setThreadKey(e).setEntryPoint(null).log()},onDeclineClick:function(){var c=b("MercuryIDs").isGroupChat(a.props.threadID);a.$1=b("Bootloader").loadModules(["MessengerDeclineDialogReact.bs"],function(d){var f=d.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(f,{onBlock:a.props.onIgnoreBlock,onDelete:a.props.onDeleteDialogDeleteClick,onToggle:a.props.onDeleteDialogToggleClick,isGroupChat:c})});new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType("pending").setThreadKey(e).setEntryPoint("inbox_banner").log()},"MessengerComposerPendingActions.react")},onDeleteClick:function(){a.$2=b("Bootloader").loadModules(["MessengerFilteredDeleteDialogReact.bs"],function(c){var d=c.jsComponent;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(d,{onDelete:a.props.onDeleteDialogDeleteClick,onToggle:a.props.onDeleteDialogToggleClick})})},"MessengerComposerPendingActions.react"),new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(a.props.threadID)).setSurface("thread").setFolderType("other").setThreadKey(e).setEntryPoint("inbox_banner").log()}}))};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerResponsiveBlock.react",["React","createCancelableFunction","requestAnimationFrame","shallowEqual","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;var g={bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,visibility:"hidden",zIndex:-1},h={left:0,position:"absolute",top:0,transition:"0s"},i={height:"200%",left:0,position:"absolute",top:0,transition:"0s",width:"200%"};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.dirty=!1,d.lastWidth=null,d.lastHeight=null,d.lastBreakpointsToggles=null,d.setupWeirdScrollTracking=function(){d.refs.expandChild.style.width="10000px",d.refs.expandChild.style.height="10000px",d.refs.expand.scrollLeft=1e5,d.refs.expand.scrollTop=1e5,d.refs.shrink.scrollLeft=1e5,d.refs.shrink.scrollTop=1e5},d.$2=function(){__p&&__p();var a=d.refs.outer.offsetWidth,c=d.refs.outer.offsetHeight;if((a!=d.lastWidth||c!=d.lastHeight)&&!d.dirty){if(Math.abs(a-(d.lastWidth||0))<10&&Math.abs(c-(d.lastHeight||0))<16)return;d.dirty=!0;d.lastWidth=a;d.lastHeight=c;a=d.props.breakpointsToggles(a,c);b("shallowEqual")(d.lastBreakpointsToggles,a)?d.dirty=!1:d.forceUpdate(function(){b("requestAnimationFrame")(function(){d.dirty=!1})});d.lastBreakpointsToggles=a}d.setupWeirdScrollTracking()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1=b("createCancelableFunction")(this.$2),this.onScroll=b("throttle")(this.$1,50),this.setupWeirdScrollTracking(),this.onScroll()};d.componentWillUnmount=function(){this.$1.cancel()};d.render=function(){return b("React").createElement("div",{ref:"outer"},this.props.children(this.props.breakpointsToggles(this.lastWidth,this.lastHeight)),b("React").createElement("div",{style:g,onScroll:this.onScroll,ref:"expand"},b("React").createElement("div",{style:h,ref:"expandChild"})),b("React").createElement("div",{style:g,onScroll:this.onScroll,ref:"shrink"},b("React").createElement("div",{style:i})))};return c}(b("React").Component);c.propTypes={children:a.func.isRequired,breakpointsToggles:a.func.isRequired};e.exports=c}),null);
__d("MessengerComposer.react",["cssVar","cx","fbt","invariant","requireCond","AsyncRequest","AutoFocusableLink.react","BootloadOnRender.react","ChatPhotoUploader.react","CurrentUser","FBLogger","JSResource","LazyComponent.react","MercuryBootloadOnInteraction.react","MercuryConfig","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryReadOnlyReason","MercuryShareAttachmentRenderLocations","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerActions","MessengerAdminGroupUtils","MessengerBlockDialogReact.bs","MessengerBotMenuDataFetcher","MessengerButtonReact.re","MessengerComposerButtonLabels","MessengerComposerInput.react","MessengerComposerPendingActions.react","MessengerConfirmBlockThreadDialogReact.bs","MessengerConfirmLeaveGroupDialogReact.bs","MessengerConstants","MessengerContextualDialog.react","MessengerDialogs.bs","MessengerDotComAndInboxM4Check.bs","MessengerFileSizeErrorDialogReact.bs","MessengerHotLikeButton.react","MessengerHotLikeUtils","MessengerMessageRequestsTypedLogger","MessengerParticipants.bs","MessengerQuickCamOrigins","MessengerResponsiveBlock.react","MessengerSendButtonReact.re","MessengerState.bs","MessengerURIStore","MessengerView","MNCommerceCallToActionType","MNCommerceCTAProcessor","MNCommercePageSetting","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","P2PGKValues","React","ReasonBootloadOnInteraction.react","ReasonResource","ReplyingToMessageReact.bs","ShareDataType","URI","WorkBotLandingPageHelper","cr:996042","WorkChatExtensionAvailabilityFetcher","WorkFileUploadsGating","WorkGalahadChatSendButton.react","WorkGalahadSettings","XMessagingUnblockMessagesController","XMNCommercePageNullStateCTAController","XUISpinner.react","getPageIDFromThreadID","gkx","immutable","isWebGLEnabled","lazyLoadComponent","nullthrows","promiseDone","setImmediate"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("MessengerBlockDialogReact.bs").jsComponent,l=b("MessengerButtonReact.re").make,m=b("MessengerConfirmBlockThreadDialogReact.bs").jsComponent,n=b("MessengerConfirmLeaveGroupDialogReact.bs").jsComponent,o=b("MessengerFileSizeErrorDialogReact.bs").jsComponent,p=b("MessengerSendButtonReact.re").make,q=b("ReplyingToMessageReact.bs").jsComponent,r=b("WorkBotLandingPageHelper").shouldShowBotLandingPage,s=b("lazyLoadComponent")(b("JSResource")("WorkChatPostButtonReact").__setRef("MessengerComposer.react")),t=b("lazyLoadComponent")(b("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("MessengerComposer.react")),u=b("lazyLoadComponent")(b("JSResource")("MessengerUnconnectedThreadInfoTextReact").__setRef("MessengerComposer.react")),v=b("lazyLoadComponent")(b("JSResource")("MessengerComposerReJoin.react").__setRef("MessengerComposer.react"));a=b("React").PropTypes;var w=640,x=b("WorkGalahadSettings").isGalahadEnabled?320:360,y=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();var d;d=a.call(this,c)||this;d.refsGifUploader=null;d.handleFileUpload=function(a){d.refsUploader&&d.refsUploader.uploadFiles(a),d.exitCurrentMode()};d.focusInput=function(){d.refsInput&&d.refsInput.focus()};d.$52=function(a){d.refsGifUploader=a};d.$55=function(){var a=b("XMessagingUnblockMessagesController").getURIBuilder().getURI(),c=d.props.threadID;new(b("AsyncRequest"))(a).setMethod("POST").setData({fbid:b("MercuryIDs").getUserIDFromThreadID(c)}).send()};d.$10=function(){var a=d.props.thread;a=!!a&&b("MessageRequestUtils").isFiltered(a);var c=b("CurrentUser").getID();c=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,c);d.$59()["delete"](d.props.threadID);b("MessengerActions").selectThread(null);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(a?"other":"pending").setThreadKey(c).setEntryPoint("inbox_banner").log()};d.$9=function(){__p&&__p();var a;a=(a=d.props)!=null?(a=a.thread)!=null?a.thread_id:a:a;a=b("MercuryIDs").isGroupChat(a);if(a)d.$60();else{a=(a=d.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;var c=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null,e=c&&c.short_name;e&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(k,{onBlock:function(){d.$61(e)},contact:c})})}};d.$11=function(a){var c=d.props.thread,e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d.props.threadID,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);a||new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d.props.threadID)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint("inbox_banner").log()};d.$53=function(a,c){a.platformFBID.toString()===b("MercuryConfig").MessengerAppID?d.props.onStickerSelect(a.resultID.toString()):d.refsGifUploader&&d.refsGifUploader.uploadURL&&d.refsGifUploader.uploadURL({attribution_app_id:a.platformFBID,external_image_url:a.source.url,preview_url:a.media.preview?a.media.preview.url:a.media.thumbnail.url,source:a.source})};d.$54=function(a){d.focusInput(),d.refsInput&&d.refsInput.insertEmoji(a)};d.$20=function(a){d.setState({currentValue:a})};d.$18=function(a,b,c){d.refsEmojiButton&&d.refsEmojiButton.hideFlyout();return d.props.onMessageSend&&d.props.onMessageSend(a,b,c)};d.$19=function(){var a=d.props.onMessageSend;a!=null&&b("cr:996042")!=null&&(d.$23()&&b("nullthrows")(d.props.workChatContentApps).forEach(function(c,d){var e=(d=c.payload)==null?void 0:d.contentAppID;if(e==null)return;b("setImmediate")(function(){return a("",{shareable_attachment:{share_type:b("ShareDataType").FB_GENERIC_SHAREABLE,share_params:{oid:e}}})})}),b("cr:996042").removeAllWorkContentApps(d.props.threadID))};d.$50=function(a){d.refsInput&&d.refsInput.triggerSend()};d.$51=function(a){return d.props.onStickerSelect(a)};d.$13=function(){if(d.state.nullStateCTA!==null)switch(d.state.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:break;case b("MNCommerceCallToActionType").POSTBACK:default:d.setState({disableNullState:!0});b("MNCommercePostbackRefSendManager").hasMDotMeRef(d.$5())?(b("MNCommercePostbackCTADataManager").sendAndConfirm(d.state.nullStateCTA.id,d.state.nullStateCTA.title,d.props.threadID,null,d.$1,b("MNCommercePostbackRefSendManager").getMdotMeRef()),b("MessengerActions").changeMDotMeReferral()):b("MNCommercePostbackCTADataManager").sendAndConfirm(d.state.nullStateCTA.id,d.state.nullStateCTA.title,d.props.threadID,null,d.$1);b("MNCommerceCTAProcessor").logCTAClick(d.state.nullStateCTA);break}};d.$1=function(){d.setState({showNullState:!0,disableNullState:!1})};d.$57=function(){var a;a=(a=d.props.thread)==null?void 0:a.joinable_mode.link;if(a){a=b("URI").tryParseURI(a);a=a&&a.getQueryData().group_hash;a&&(d.setState({requesting_rejoin:!0}),d.$59().chatJoinThroughHash(a,function(a){d.setState({requesting_rejoin:!1})}))}};d.$1=d.$1.bind(babelHelpers.assertThisInitialized(d));d.state=d.$2();return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.threadID!==this.props.threadID||a.thread&&!this.props.thread?(this.setState(this.$2()),a.thread&&this.$3(a.thread,b("getPageIDFromThreadID")(a.threadID))):a.thread&&this.$4(a.thread,b("getPageIDFromThreadID")(a.threadID))&&this.setState({showNullState:!1})};d.componentDidMount=function(){var a=this;this.props.thread&&this.$3(this.props.thread,this.$5());var c=b("gkx")("678608");b("CurrentUser").isWorkUser()&&c&&b("promiseDone")(b("WorkChatExtensionAvailabilityFetcher").checkHasChatExtension(),function(b){return a.setState({hasWorkChatExtension:b})})};d.componentDidUpdate=function(a){(a.canReply!==this.props.canReply||a.replyingToMessage!==this.props.replyingToMessage||a.sharePreview!==this.props.sharePreview||a.fileUploader!==this.props.fileUploader||a.workChatContentApps!==this.props.workChatContentApps)&&(this.props.onResize&&this.props.onResize()),this.props.replyingToMessage&&a.replyingToMessage!==this.props.replyingToMessage&&this.focusInput(),this.props.thread&&(this.$6(),this.$7())};d.render=function(){__p&&__p();var a=this;if(!this.props.canReply)return this.$8();else if(this.props.thread&&this.props.threadID&&this.props.viewer&&b("MessageRequestUtils").shouldShowComposerPendingActions(this.props.thread)&&!this.state.pendingActionsBypassed)return b("React").createElement(b("MessengerComposerPendingActions.react"),{thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer,onAccept:function(){return a.setState({pendingActionsBypassed:!0})},onIgnoreBlock:this.$9,onDeleteDialogDeleteClick:this.$10,onDeleteDialogToggleClick:this.$11});var c=this.props.thread&&this.props.thread.message_count;b("MNCommercePostbackRefSendManager").sendMDotMeRef(this.$5(),c);if(this.state.showNullState&&this.state.nullStateCTA!==null)return b("React").createElement("div",{className:"_2xh0"},this.$12(),b("React").createElement("div",{className:"_2xh4 _59w_"},b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{cta:this.state.nullStateCTA,onClick:this.$13,disabled:this.state.disableNullState,threadID:this.props.threadID}),loader:b("JSResource")("ChatPageComposerNullState.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("XUISpinner.react"),{size:"small"})})));var d=this.$14();c=b("React").createElement(b("MessengerResponsiveBlock.react"),{breakpointsToggles:function(a){return[a!=null&&a<=w,a]}},function(c){var e=c[0];c=c[1];return b("React").createElement("div",{"aria-label":i._("\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e43\u0e2b\u0e21\u0e48"),className:"_4rv3"+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyq":"")+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyv":""),role:"region"},a.props.thread&&b("MessageRequestUtils").shouldShowUnconnectedThreadInfoText(a.props.thread)?a.$15():null,a.props.replyingToMessage&&a.$16(),a.$17(a.props.threadID),b("React").createElement("div",{className:"_5irm"+(e?" _1_73":"")},b("React").createElement(b("MessengerComposerInput.react"),{disableAutofocus:!!a.props.disableAutofocus,fileUploader:a.props.fileUploader,handleOnlyImageUploads:!1,isComposing:d,mentionsEnabled:a.props.mentionsEnabled,ref:function(b){return a.refsInput=b},onBeforeInput:function(){return a.refsEmojiButton&&a.refsEmojiButton.hideFlyout()},onResize:a.props.onResize,onMessageSend:a.$18,participants:a.props.participants,sharePreview:a.props.sharePreview,smallerEqual640:e,thread:a.props.thread,threadID:d?b("MessengerConstants").NEW_THREAD_KEY:a.props.threadID,pageID:a.$5(),viewer:a.props.viewer,onFileUpload:a.handleFileUpload,onWorkChatContentAppsSend:a.$19,onChange:a.$20,showMenu:a.state.showMenu,disableInput:a.state.disableInput}),a.$21(c)))});var e=this.$5(),f=d?b("MessengerConstants").NEW_THREAD_KEY:this.props.threadID;return e&&!b("CurrentUser").isWorkUser()?b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{onResize:this.props.onResize,originalElement:c,pageID:e,playLinkClassName:"_2xh6 _2xh7",showGameImage:!1,threadFBID:this.props.threadFBID,threadID:f}),loader:b("JSResource")("MessengerGameBotPlayButton.react").__setRef("MessengerComposer.react"),placeholder:c}):c};d.$17=function(a){__p&&__p();if(!a)return null;if(!this.$22()&&!this.$23())return null;var c=this.props,d=c.fileUploader,e=c.thread;c=c.workChatContentApps;e=e&&e.footer_color?e.footer_color:"#0084ff";var f=function(c){b("cr:996042")!=null&&c!=null&&b("cr:996042").removeWorkContentApp(a,c)};return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement(b("XUISpinner.react"),{className:"_2qf"})},b("React").createElement(t,{files:d!=null&&d.get("uploadedFiles")!=null?d.get("uploadedFiles"):b("immutable").Map(),workFiles:(d=c)!=null?d:b("immutable").Map(),small:!1,threadID:a,threadCustomColor:e,onClick:this.$24,onWorkFileRemove:f,onResize:this.props.onResize}))};d.$15=function(){var a;a=(a=this.props.thread)==null?void 0:a.other_user_fbid;if(!a)return null;a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a));return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(u,{name:a.short_name,onBlock:this.$9,onDelete:this.$10,onToggle:this.$11,thread:this.props.thread||void 0}))};d.$16=function(){var a=this.props.replyingToMessage;return!a?null:b("React").createElement(q,{name:this.$25(a),body:a.body,attachments:a.attachments,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage})};d.$25=function(a){a=a.author?b("MessengerParticipants.bs").getNow(a.author):null;return a&&a.short_name};d.$24=function(a,c){b("MessengerActions").cancelFileUpload(a,c)};d.$21=function(a){var c=this;return this.state.disableInput===!0?null:b("React").createElement("div",{ref:function(a){c.refsButtonsContainer=a},className:"_4rv4"+(b("WorkGalahadSettings").isGalahadEnabled?" _7cyw":"")},this.$26(a),this.$27())};d.$26=function(a){if(this.props.hideActions)return null;return a&&a<x?b("React").createElement("div",null,b("React").createElement("ul",{className:"_39bj"},this.$28(),b("CurrentUser").isWorkUser()?this.$29():this.$30(),this.$31(),this.$32(),this.$33()),b("React").createElement("ul",{className:"_39bj"},this.$34(),this.$35(),this.$36(),this.$37(),this.$38())):b("React").createElement("ul",{className:"_39bj"},this.$28(),b("CurrentUser").isWorkUser()?this.$29():null,this.$30(),b("CurrentUser").isWorkUser()?this.$39():null,this.$31(),this.$32(),this.$33(),this.$34(),this.$35(),this.$36(),this.$37(),this.$38())};d.$40=function(a){b("FBLogger")("messenger_upload_file").warn("Uploading file is too large"),b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(o,{error:a.error})})};d.handleTextDropped=function(a){this.refsInput&&this.refsInput.handleTextDropped(a)};d.$35=function(){return b("React").createElement("li",null,this.$41())};d.$41=function(){var a;if(!b("P2PGKValues").P2PVisible||!this.props.threadID||this.$42()||!this.props.p2pPaymentConfig||((a=this.props)!=null?(a=a.participants)!=null?a.size:a:a)===1)return null;a="_30yy _25pc _39bk";return b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:a,ContextualDialog:b("MessengerContextualDialog.react"),thread:this.props.thread,threadID:this.props.threadID,p2pPaymentConfig:this.props.p2pPaymentConfig}),loader:b("JSResource")("P2PSendMoneyContainerBootloader.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:a,role:"button"})})};d.$38=function(){return b("gkx")("678582")&&this.props.threadID?b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:"_4rv5 _39bk"+(this.state.flyoutOpen?" _5jhb":""),location:b("MessengerQuickCamOrigins").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:b("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_4rv5 _39bk",role:"button","aria-label":b("MessengerComposerButtonLabels").QuickCamButtonLabel})}):null};d.$34=function(){return!y||this.$14()?null:b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:b("JSResource")("MessengerVoiceClipButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_4rv7 _39bk _30yy",role:"button","aria-label":b("MessengerComposerButtonLabels").VoiceClipButtonLabel})}))};d.$36=function(){if(b("gkx")("994335"))return null;if(this.props.thread&&this.props.thread.is_canonical)return null;return!this.props.threadFBID||this.$14()?null:b("React").createElement("li",null,b("React").createElement(b("ReasonBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("ReasonResource")(b("JSResource")("MessengerGroupPollingButtonReact.bs").__setRef("MessengerComposer.react")),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _30yy _2o-b",role:"button","aria-label":b("MessengerComposerButtonLabels").GroupPollingButtonLabel})}))};d.$37=function(){var a=b("gkx")("678262")&&b("isWebGLEnabled")();return a&&this.props.threadFBID&&!this.$42()?b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerGamesButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _30yy _4ce_",role:"button"})})):null};d.$28=function(){return this.props.threadFBID&&!this.$42()&&this.state.hasWorkChatExtension?b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.solid_color,threadFBID:this.props.threadFBID}),loader:b("JSResource")("MessengerWorkplaceChatExtensionsButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:"_39bk _22k0 _30yy",role:"button"})})):null};d.$43=function(a){var c=this,d=b("CurrentUser").isWorkUser()?!b("WorkFileUploadsGating").canUploadFiles:!1;return b("React").createElement("li",{className:"_39bk"},b("React").createElement(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!(this.props.threadID||this.$44()),ref:function(a){return c.refsUploader=a},imageClassName:(a=="files"?"_5vn8":"")+(a=="attachment"?" _46si":""),imagesOnly:d,inputClassname:"_260t",linkClassName:"_30yy _7hi7 _260u",focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$40,threadID:this.props.threadID}))};d.$45=function(){return this.$14()&&!this.$46()?!1:!0};d.$46=function(){return this.props.recipients&&this.props.recipients.count()===1};d.$30=function(){return!this.$45()?null:this.$43("files")};d.$29=function(){return!b("WorkFileUploadsGating").canUploadFiles||!this.$45()?null:this.$43("attachment")};d.$39=function(){var a,c=this.props.openPostComposerInSameWindow?"_self":"_blank";a=(a=this.props)!=null?(a=a.thread)!=null?(a=a.associated_object)!=null?a.action_link:a:a:a;if(!a){var d;a=(d=this.props)!=null?(d=d.thread)!=null?(d=d.work_associated_group)!=null?d.url:d:d:d}return a?b("gkx")("808098")?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(s,{composerLink:a,target:c})):null:null};d.$47=function(){return this.state.currentValue.length>0||this.$22()||this.$23()||this.$48()};d.$22=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadedFiles").size>0)};d.$23=function(){var a=this.props.workChatContentApps;return a!=null&&a.size>0};d.$48=function(){var a=this.props.sharePreview;return!!(a&&a.params&&a.type)};d.$49=function(){var a=this.props.fileUploader;return Boolean(a&&a.get("uploadingFiles").size>0)};d.$27=function(){var a=!(this.props.threadID||this.$44());return!a&&this.$47()&&!this.$49()?b("WorkGalahadSettings").isGalahadEnabled?b("React").createElement(b("WorkGalahadChatSendButton.react"),{customColor:this.props.thread?this.props.thread.solid_color:null,onClick:this.$50,className:(this.props.threadID?"_30yy":"")+" _38lh"}):b("React").createElement(p,{className:(this.props.threadID?"_30yy":"")+" _38lh",customColor:this.props.thread&&this.props.thread.solid_color||void 0,onClick:this.$50}):b("React").createElement(b("MessengerHotLikeButton.react"),{className:"_4rv9"+(b("MessengerDotComAndInboxM4Check.bs").yes||b("gkx")("1072568")?" _6ymq":"")+(this.props.threadID?" _30yy":""),disabled:a,customColor:this.props.thread&&this.props.thread.solid_color,customLike:b("MessengerHotLikeUtils").getCustomEmojiFromThread(this.props.thread)||void 0,sendSticker:this.$51,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24,thread:this.props.thread})};d.$31=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _4rv6 _39bk";return b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),disabled:!(this.props.threadID||this.$44()),getInput:function(){return a.refsInput},flyoutAlignment:"right",flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatStickerButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").StickerButtonLabel})}))};d.$12=function(){__p&&__p();var a;a=(a=this.props)!=null?(a=a.thread)!=null?a.other_user_fbid:a:a;a=a?b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(a)):null;var c=a&&a.name||"page";if(this.state.nullStateCTA!==null)switch(this.state.nullStateCTA.action_type){case b("MNCommerceCallToActionType").OPEN_NATIVE:return null;case b("MNCommerceCallToActionType").POSTBACK:if(!b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$5())&&!this.state.nullStateCTA.instantgame_metadata&&!b("CurrentUser").isWorkUser())return b("React").createElement("div",{className:"_3zc8"},i._("\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e04\u0e38\u0e13\u0e41\u0e15\u0e30 \"{cta title}\" {name} \u0e01\u0e47\u0e08\u0e30\u0e40\u0e2b\u0e47\u0e19\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e32\u0e18\u0e32\u0e23\u0e13\u0e30\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c)]));else if(b("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$5())){var d=this.$5();a=a&&a.vanity?"m.me/"+a.vanity:d?"m.me/"+d:"m.me";return b("React").createElement("div",{className:"_3zc8"},i._("\u0e40\u0e21\u0e37\u0e48\u0e2d\u0e04\u0e38\u0e13\u0e41\u0e15\u0e30 \"{cta title}\" {name} \u0e08\u0e30\u0e40\u0e2b\u0e47\u0e19\u0e02\u0e49\u0e2d\u0e21\u0e39\u0e25\u0e2a\u0e32\u0e18\u0e32\u0e23\u0e13\u0e30\u0e02\u0e2d\u0e07\u0e04\u0e38\u0e13\u0e41\u0e25\u0e30\u0e40\u0e2b\u0e47\u0e19\u0e27\u0e48\u0e32\u0e04\u0e38\u0e13\u0e44\u0e14\u0e49\u0e40\u0e1b\u0e34\u0e14\u0e25\u0e34\u0e07\u0e01\u0e4c {link} \u0e02\u0e2d\u0e07\u0e1e\u0e27\u0e01\u0e40\u0e02\u0e32\u0e41\u0e25\u0e49\u0e27",[i._param("cta title",this.state.nullStateCTA.title),i._param("name",c),i._param("link",a)]))}break;default:return null}return null};d.$32=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _yht _39bk";return b("React").createElement("li",null,b("React").createElement("div",{style:{display:"none"}},b("React").createElement(b("ChatPhotoUploader.react"),{allowCrossPage:!0,disabled:!1,ref:this.$52,imagesOnly:!1,focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$40})),b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),getInput:function(){return a.refsInput},getQuery:function(){return a.refsInput?a.refsInput.getValue():""},location:b("MercuryShareAttachmentRenderLocations").MESSENGER,onSelect:this.$53}),loader:b("JSResource")("ChatContentSearchButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").ContentSearchButtonLabel})}))};d.$33=function(){var a=this,c=(this.props.threadID?"_30yy":"")+" _5s2p _39bk";return b("React").createElement("li",null,b("React").createElement(b("MercuryBootloadOnInteraction.react"),{component:b("React").createElement(b("LazyComponent.react"),{className:c,ContextualDialogClass:b("MessengerContextualDialog.react"),flyoutAlignment:"right",getInput:function(){return a.refsInput},onSelect:this.$54,onMount:function(b){return a.refsEmojiButton=b},sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:b("JSResource")("ChatEmojiButton.react").__setRef("MessengerComposer.react"),placeholder:b("React").createElement(b("AutoFocusableLink.react"),{className:c,role:"button","aria-label":b("MessengerComposerButtonLabels").EmojiButtonLabel})}))};d.$8=function(){__p&&__p();var a=this;if(!this.props.thread||this.props.view===b("MessengerView").DETAIL.COMPOSE)return null;var c=this.props.thread,d=this.props.participants,e=!1,f=!1;if(c.cannot_reply_reason==="blocked"){e=!0;c.is_canonical===!0||j(0,4973);d!=null||j(0,4974);var g=c.other_user_fbid;g!=null||j(0,4975);d=d.get(b("MercuryIDs").getParticipantIDFromUserID(g));d!=null||j(0,4976);b("MessengerState.bs").compute(this.props.viewer,function(d){d=d.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").qualifiesAs(a.props.viewer,d,c)&&(f=!0)})}if(e){g=this.$42()?"page":"person";if(f)return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},i._("You've blocked messages from this {name}. {unblock_now_button}",[i._param("name",g),i._param("unblock_now_button",b("React").createElement(l,{label:i._("\u0e40\u0e25\u0e34\u0e01\u0e1a\u0e25\u0e47\u0e2d\u0e01\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49"),onClick:this.$55,type:"secondary"}))])));else return b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},i._("\u0e1a\u0e38\u0e04\u0e04\u0e25\u0e19\u0e35\u0e49\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d\u0e44\u0e14\u0e49\u0e43\u0e19\u0e02\u0e13\u0e30\u0e19\u0e35\u0e49")))}return this.$56()?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(v,{thread:c,onActionClick:this.$57,requesting:this.state.requesting_rejoin})):b("React").createElement("div",{className:"_4rv3"},b("React").createElement("div",{className:"_2wy4"},b("MercuryReadOnlyReason").getReason(c.has_email_participant)))};d.$58=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};d.$60=function(){var a=this,c,d=(c=this.props)!=null?(c=c.thread)!=null?c.thread_id:c:c;d&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(n,{onLeave:function(){var c=b("MessengerURIStore").getState().activeThreadID===d;a.$59().leaveGroup(d);c&&b("MessengerActions").selectThread(null)},isViewerAdmin:!1,thread:a.props.thread})})};d.$61=function(a){var c=this,d=this.props.threadID,e=d===b("MessengerURIStore").getState().activeThreadID;this.$58().blockIgnoreOnMessengerDotCom(e,d,function(){c.$62(a)})};d.$62=function(a){var c=this.props,d=c.threadID;c=c.thread;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(m,{participantName:a})});var e=b("CurrentUser").getID();e=b("MercuryIDs").getThreadKeyfromThreadIDUserID(d,e);c=!!c&&b("MessageRequestUtils").isFiltered(c);new(b("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(d)).setSurface("thread").setFolderType(c?b("MessagingTag").OTHER:b("MessagingTag").PENDING).setThreadKey(e).setEntryPoint(null).log()};d.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode()};d.$14=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE};d.$44=function(){return!!(this.$14()&&this.props.recipients&&this.props.recipients.size)};d.$42=function(){return!!this.$5()};d.$5=function(){return b("getPageIDFromThreadID")(this.props.threadID)};d.$6=function(){var a=this,c=this.$5();c?b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({showMenu:b})},function(){a.setState({showMenu:!1})},b("MNCommercePageSetting").STRUCTURED_MENU_ENABLED):this.setState({showMenu:!1})};d.$7=function(){var a=this,c=this.$5();c?b("MessengerBotMenuDataFetcher").getHasPageSetting(c,function(b){a.setState({disableInput:b})},function(){a.setState({disableInput:!1})},b("MNCommercePageSetting").COMPOSER_INPUT_DISABLED):this.setState({disableInput:!1})};d.$4=function(a,c){var d=a.message_count;c=!!c;if(b("CurrentUser").isWorkUser()&&c&&d===1&&this.props.viewer){c=b("MessengerState.bs").getThreadMessagesRangeNow(this.props.viewer,a.thread_id,0,1);return!r(b("immutable").List(c))}return d>0};d.$63=function(a,b){b=r(b);var c=!!a;c&&b&&this.$64(a)};d.$64=function(a){var c=b("XMNCommercePageNullStateCTAController").getURIBuilder();new(b("AsyncRequest"))().setURI(c.getURI()).setMethod("POST").setData({page_id:a}).setHandler(function(a){a&&a.payload?this.setState({showNullState:!0,nullStateCTA:a.payload}):this.setState({showNullState:!1,disableNullState:!1})}.bind(this)).send()};d.$3=function(a,c){var d=this,e=a.message_count,f=!!c;if(b("CurrentUser").isWorkUser()&&f&&e===1&&this.props.viewer){b("MessengerState.bs").getThreadMessagesRange(this.props.viewer,a.thread_id,0,1,function(a){return d.$63(c,b("immutable").List(a||[]))});return}a=e===0;f&&a?this.$64(c):this.setState({showNullState:!1,disableNullState:!1})};d.$2=function(){return{pendingActionsBypassed:!1,currentValue:"",nullStateCTA:null,showMenu:!1,disableInput:!1,showNullState:!1,disableNullState:!1}};d.$59=function(){return b("MercuryThreadActions").getForFBID(this.props.viewer)};d.$56=function(){var a=this.props,c=a.thread;a=a.viewer;if(!c||!a)return!1;a=c.participants.includes(b("MercuryIDs").getParticipantIDFromUserID(a));c=b("MessengerAdminGroupUtils").isWorkFroup(c);return c&&!a};d.testUtils_renderRawP2PSendMoneyButton=function(){return this.$41()};d.replyToMention=function(a){this.refsInput&&this.refsInput.addMention&&this.refsInput.addMention(a)};return c}(b("React").PureComponent);c.propTypes={canReply:a.bool,disableAutofocus:a.bool,fileUploader:a.object,hideActions:a.bool,mentionsEnabled:a.bool,onCustomLikeSelect:a.func,onMessageSend:a.func,onPhotoUploadComplete:a.func,onPhotoUploadCancel:a.func,onPhotoUploadFail:a.func,onPhotoUploadSubmit:a.func,onResize:a.func,onStickerSelect:a.func.isRequired,onVoiceClipCreate:a.func,p2pPaymentConfig:a.object,participants:a.instanceOf(b("immutable").Map),recipients:a.instanceOf(b("immutable").List),sharePreview:a.object,threadID:a.string,threadFBID:a.string,thread:a.object,view:a.string,viewer:a.string,replyingToMessage:a.object,workChatContentApps:a.instanceOf(b("immutable").Map),onCancelReplyingToMessage:a.func,openPostComposerInSameWindow:a.bool};e.exports=c}),null);
__d("MessengerComposerContainerImpl.react",["fbt","MessengerSurfaceType.bs","requireCond","AsyncRequest","AsyncUploadRequest","Bootloader","CurrentUser","EmojiDispatcher","EmojiLikeUtils","EmojiState","KeyEventController","MercuryAttachment","MercuryAttachmentType","MercuryConfig","MercuryIDs","MercuryLocalIDs","MercuryMessageActions","MercuryMessageObject","MercurySendMessageHandler","MercuryThreadActions","MercuryThreadIDMap","MercuryThreadInformer","MessageRequestUtils","MessengerActions","MessengerComposerActions","MessengerDialogs.bs","MessengerDotComAndInboxM4Check.bs","MessengerEmojiUsageUtils","MessengerSimpleDialogReact.bs","MessengerState.bs","MessengerView","MNPlatformTagsDataManager","P2PPaymentConfig","PhotosUploadID","React","ReactDOM","RepliedToMessageStatusForGraphQL","SubscriptionsHandler","XMessagingSetThreadNameController","getPageIDFromThreadID","gkx","immutable","cr:861483","cr:852472","MessengerComposer.react","EmojiStateStore"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerSimpleDialogReact.bs").jsComponent;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$6=function(a,c,e){__p&&__p();d.props.hostProps&&d.props.hostProps.messageSentCallback();b("EmojiState").updateRecentlyUsed(b("MessengerEmojiUsageUtils").findAllEmojis(a));if(!d.props.canReply){e&&e(null);return!1}var f=null,g=!1;d.$13(a,c)||(g=d.$14(function(e){__p&&__p();var g=d.$2.constructUserGeneratedMessageObject(a,d.props.source,e);g=babelHelpers["extends"]({},g);e=b("MercuryIDs").getUserIDFromThreadID(e);if(b("MNPlatformTagsDataManager").hasThreadTags(e)){e=b("MNPlatformTagsDataManager").getThreadTags();g.tags=e||[]}c&&(c.shareable_attachment&&(g.shareable_attachment=c.shareable_attachment),c.profile_ranges&&(g.profile_ranges=g.profile_xmd=c.profile_ranges));f=g;return g}));e&&e(g?f:null);f=null;return g},d.$8=function(a,b){d.$3.cancelAttachmentPlaceholder(b.upload_id,b)},d.$7=function(a,b){d.$3.confirmAttachmentPlaceholder(b.upload_id,b)},d.$9=function(a,b){d.$3.cancelAttachmentPlaceholder(b.upload_id,b);a=g._("\u0e2d\u0e31\u0e1e\u0e42\u0e2b\u0e25\u0e14\u0e25\u0e49\u0e21\u0e40\u0e2b\u0e25\u0e27");var c=g._("\u0e42\u0e1b\u0e23\u0e14\u0e25\u0e2d\u0e07\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07 \u0e15\u0e23\u0e27\u0e08\u0e2a\u0e2d\u0e1a\u0e43\u0e2b\u0e49\u0e41\u0e19\u0e48\u0e43\u0e08\u0e27\u0e48\u0e32\u0e04\u0e38\u0e13\u0e01\u0e33\u0e25\u0e31\u0e07\u0e2d\u0e31\u0e1e\u0e42\u0e2b\u0e25\u0e14\u0e44\u0e1f\u0e25\u0e4c\u0e17\u0e35\u0e48\u0e16\u0e39\u0e01\u0e15\u0e49\u0e2d\u0e07");b.errorDialogParams&&(a=b.errorDialogParams.title||a,c=b.errorDialogParams.body||c);d.$15(a,c)},d.$10=function(a,b){d.$14(function(a){return d.$2.constructAttachmentMessageObject(d.props.source,a)},function(a){d.$3.addAttachmentPlaceholder(a,b.upload_id,b),d.handleMessageSentToPendingThread()})},d.handleAudioUpload=function(a){var c="upload_"+b("PhotosUploadID").getNewID();d.$1.sendAttachment(d.props.threadID,i(c),d.props.source);var e={};e[c]=a;c=new(b("AsyncUploadRequest"))(b("MercuryConfig").upload_url).setAllowCrossOrigin(!0).setRelativeTo(b("ReactDOM").findDOMNode(babelHelpers.assertThisInitialized(d))).setData({voice_clip:!0}).setFiles(e);d.$4.addSubscriptions(c.subscribe("success",function(a,b){return d.$16(b)}));c.send()},d.$11=function(a){return d.$14(function(b){return d.$2.constructStickerMessageObject(a,d.props.source,b)})},d.$12=function(a,c,e){var f=d.props.threadID,g=d.$2.constructUserGeneratedMessageObject(a.emoji,d.props.source,f);g.has_attachment=!1;return d.$14(function(a){b("EmojiLikeUtils").setEmojiSize(g,c);return b("EmojiLikeUtils").setEmojiSource(g,e)})},d.handleMessageSentToPendingThread=function(){d.props.thread&&b("MessageRequestUtils").isMessageRequest(d.props.thread)&&b("MercuryThreadActions").getForFBID(d.props.viewer).movePendingToInbox(d.props.threadID)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this;this.$1=b("MercurySendMessageHandler").getForFBID(this.props.viewer);this.$3=b("MercuryMessageActions").getForFBID(this.props.viewer);this.$2=b("MercuryMessageObject").getForFBID(this.props.viewer);this.$5=b("MercuryThreadInformer").getForFBID(this.props.viewer);this.$4=new(b("SubscriptionsHandler"))();b("EmojiDispatcher").explicitlyRegisterStores([b("EmojiStateStore")]);this.props.onMount&&this.props.onMount(this);this.$4.addSubscriptions(b("KeyEventController").registerKey("ESCAPE",function(){a.props.replyingToMessage&&(a.props.onCancelReplyingToMessage&&a.props.onCancelReplyingToMessage())},function(a,c){return!!(a.key==="Escape"&&b("KeyEventController").filterEventTypes(a,c)&&b("KeyEventController").filterEventModifiers(a,c))}))};d.componentWillUnmount=function(){this.$4.release()};d.focusInput=function(){this.refsComposer&&this.refsComposer.focusInput&&this.refsComposer.focusInput()};d.render=function(){var a=this,c=this.props.hostProps?this.props.hostProps.hideActions:!1,d=this.props.surface===b("MessengerSurfaceType.bs").workQuickchat;if(b("cr:852472")&&(b("MessengerDotComAndInboxM4Check.bs").yes||b("CurrentUser").isWorkUser()&&b("gkx")("1072568")&&!d))if(b("cr:861483")&&b("getPageIDFromThreadID")(this.props.threadID))return b("React").createElement(b("cr:861483").make,{canReply:this.props.canReply,disableAutofocus:this.props.disableAutofocus,fileUploader:this.props.fileUploader,hideActions:c,mentionsEnabled:!0,onMessageSend:this.$6,onPhotoUploadComplete:this.$7,onPhotoUploadCancel:this.$8,onPhotoUploadFail:this.$9,onPhotoUploadSubmit:this.$10,onResize:this.props.onResize,onStickerSelect:this.$11,onCustomLikeSelect:this.$12,onVoiceClipCreate:this.handleAudioUpload,replyingToMessage:this.props.replyingToMessage,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage,p2pPaymentConfig:b("P2PPaymentConfig").config,participants:this.props.participants,recipients:this.props.recipients,ref:function(b){return a.refsComposer=b},sharePreview:this.props.sharePreview,thread:this.props.thread,threadId:this.props.threadID,threadFbid:this.props.threadFBID,view:this.props.view,viewer:this.props.viewer});else return b("React").createElement(b("cr:852472").make,{canReply:this.props.canReply,disableAutofocus:this.props.disableAutofocus,fileUploader:this.props.fileUploader,hideActions:c,mentionsEnabled:!0,onMessageSend:this.$6,onPhotoUploadComplete:this.$7,onPhotoUploadCancel:this.$8,onPhotoUploadFail:this.$9,onPhotoUploadSubmit:this.$10,onResize:this.props.onResize,onStickerSelect:this.$11,onCustomLikeSelect:this.$12,onVoiceClipCreate:this.handleAudioUpload,replyingToMessage:this.props.replyingToMessage,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage,p2pPaymentConfig:b("P2PPaymentConfig").config,participants:this.props.participants,recipients:this.props.recipients,ref:function(b){return a.refsComposer=b},sharePreview:this.props.sharePreview,showBotMenu:!1,thread:this.props.thread,threadId:this.props.threadID,threadFbid:this.props.threadFBID,view:this.props.view,viewer:this.props.viewer});else return b("React").createElement(b("MessengerComposer.react"),{canReply:this.props.canReply,disableAutofocus:this.props.disableAutofocus,fileUploader:this.props.fileUploader,hideActions:c,mentionsEnabled:!0,onMessageSend:this.$6,onPhotoUploadComplete:this.$7,onPhotoUploadCancel:this.$8,onPhotoUploadFail:this.$9,onPhotoUploadSubmit:this.$10,onResize:this.props.onResize,onStickerSelect:this.$11,onCustomLikeSelect:this.$12,onVoiceClipCreate:this.handleAudioUpload,replyingToMessage:this.props.replyingToMessage,onCancelReplyingToMessage:this.props.onCancelReplyingToMessage,p2pPaymentConfig:b("P2PPaymentConfig").config,participants:this.props.participants,recipients:this.props.recipients,ref:function(b){return a.refsComposer=b},sharePreview:this.props.sharePreview,threadID:this.props.threadID,threadFBID:this.props.threadFBID,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer,workChatContentApps:this.props.workChatContentApps,openPostComposerInSameWindow:this.props.openPostComposerInSameWindow})};d.$13=function(a,b){return a?!1:!(b&&(b.shareable_attachment||b.profile_ranges.length>0))};d.$16=function(a){var b=a.getName();a=a.getResponse().payload.metadata[0].audio_id;this.$3.confirmAttachmentPlaceholder(b,{upload_id:b,audio_ids:[a]})};d.handleFileUpload=function(a){var b=this;a=a.reduce(function(a,b){var c=b.type.split("/")[0];a[c]?a[c].push(b):a.other.push(b);return a},{audio:[],image:[],other:[]});a.audio.forEach(function(a){return b.handleAudioUpload(a)});this.refsComposer&&this.refsComposer.handleFileUpload(a.image.concat(a.other))};d.handleTextDropped=function(a){this.refsComposer&&this.refsComposer.handleTextDropped(a)};d.$14=function(a,c){__p&&__p();var d=this.props.threadID,e=this.props.recipients,f=!1,g;(!d&&e&&e.size>1||b("gkx")("836564")&&this.props.newGroupName&&this.props.newGroupName!=="")&&(d=b("MercuryLocalIDs").generateThreadID(),f=!0,g=this.props.newGroupName);if(!d)return!1;a=a(d);if(f){f=e.map(function(a){return b("MercuryIDs").getParticipantIDFromUserID(a.getUniqueID())}).toArray();b("MessengerState.bs").createNewLocalThread(this.props.viewer,d,f.concat(b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)));a.offline_threading_id=b("MercuryIDs").tokenize(d).value;a.specific_to_list=f}else this.props.participants!=null&&this.props.participants.size!=0&&(a.participants_to_hash=this.props.participants.map(function(a){return a.id}).toArray());if(this.props.replyingToMessage&&this.props.replyingToMessage.message_id){e=b("MessengerState.bs").getMessagesFromIDs(b("CurrentUser").getID(),[this.props.replyingToMessage.message_id]);e=e.length>0?e[0]:null;a.replied_to_message={status:e?b("RepliedToMessageStatusForGraphQL").VALID:b("RepliedToMessageStatusForGraphQL").TEMPORARILY_UNAVAILABLE,message:e};this.props.onCancelReplyingToMessage&&this.props.onCancelReplyingToMessage()}c?c(a):this.$3.send(a,this.handleMessageSentToPendingThread);this.props.view===b("MessengerView").DETAIL.COMPOSE&&(b("MercuryAttachment").get(a).length>0&&b("MessengerComposerActions").moveDraftToNextThread(d),b("MessengerComposerActions").exitComposeState(),b("MercuryIDs").isLocalThread(d)?this.$5.subscribeOnce("messages-updated",function(a,c){__p&&__p();a=b("MercuryThreadIDMap").get();if(a.canLinkExternally(d)){if(b("gkx")("836564")&&g&&g!==""){c=b("XMessagingSetThreadNameController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(c).setData({thread_id:a.getServerIDFromClientIDNow(d),thread_name:g}).send();b("Bootloader").loadModules(["WorkChatActivityTypedLogger","WorkChatActivityEvent"],function(a,b){new a().setEvent(b.NAMED_GROUP_CHAT_CREATION_FROM_SLASH_CHAT).log()},"MessengerComposerContainerImpl.react")}b("MessengerActions").selectThread(d)}}):b("MessengerActions").selectThread(d));this.focusInput();return!0};d.resetDrag=function(){this.refsComposer&&this.refsComposer.exitCurrentMode()};d.$15=function(a,c){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(h,{title:a,body:c})})};return c}(b("React").PureComponent);c.propTypes={canReply:a.bool,disableAutofocus:a.bool,fileUploader:a.object,onMount:a.func,onResize:a.func,participants:a.instanceOf(b("immutable").Map),recipients:a.instanceOf(b("immutable").List),sharePreview:a.object,workChatContentApps:a.instanceOf(b("immutable").Map),hostProps:a.object,threadID:a.string,threadFBID:a.string,thread:a.object,view:a.string,viewer:a.string,replyingToMessage:a.object,onCancelReplyingToMessage:a.func,newGroupName:a.string,openPostComposerInSameWindow:a.bool};function i(a){return{upload_id:a,preview_attachments:[{upload_id:a,attach_type:b("MercuryAttachmentType").PHOTO,preview_uploading:!0}]}}e.exports=c}),null);
__d("MessengerComposerContainer.react",["MessengerComposerContainerImpl.react","withMessengerSource","withMessengerSurface"],(function(a,b,c,d,e,f){"use strict";a=b("withMessengerSurface")(b("withMessengerSource")(b("MessengerComposerContainerImpl.react")));e.exports=a}),null);
__d("MessengerLeaveGroupAction",["MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryThreadInfo","MercuryTriodeSourceUtil"],(function(a,b,c,d,e,f){a={leaveGroup:function(a,c){if(b("MercuryThreadInfo").isEmptyLocalThread(a))return;var d=b("MercuryMessageObject").getForFBID(c);d=d.constructLogMessageObject(b("MercuryTriodeSourceUtil").getMercuryTriodeSource(),a.thread_id,b("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[b("MercuryIDs").getParticipantIDFromUserID(c)]});a=b("MercuryMessageActions").getForFBID(c);a.send(d)}};e.exports=a}),null);
__d("MessengerConversationContainer.react",["Bootloader","ImmutableObject","MercuryIDs","MercuryIgnoredBlockedParticipants.bs","MercuryLogMessageType","MercuryMessageStore","gkx","immutable","MercuryThreadActions","MessagingTagConstants","MessengerActions","MessengerBlockedGroupThreadWarningDialogReact.bs","MessengerConfig","MessengerConversation.react","MessengerDialogs.bs","MessengerHotLikePreviewEvents","MessengerIgnoredGroupThreadWarningDialogReact.bs","MessengerLeaveGroupAction","MessengerState.bs","MessengerParticipantUtils.bs","MessengerParticipants.bs","React","SubscriptionsHandler","MessengerServerErrorDialogReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryThreadActions").get(),h=b("MessengerServerErrorDialogReact.bs").jsComponent;a=b("React").PropTypes;var i=b("MessengerBlockedGroupThreadWarningDialogReact.bs").jsComponent,j=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").jsComponent,k=200,l=b("gkx")("833128");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isLoaded:!1,isLoading:!0,messages:b("immutable").List()},d.$2=void 0,d.$3=!1,d.$4=void 0,d.$5=void 0,d.$6=void 0,d.$7=!1,d.$14=function(){d.refs.conversation&&d.refs.conversation.scrollToBottom&&typeof d.refs.conversation.scrollToBottom==="function"&&d.refs.conversation.scrollToBottom()},d.$16=function(){var a=d.props.thread;if(a==null)return;b("MessengerBlockedGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)},d.$19=function(){var a=d.props.thread;if(a==null)return;b("MessengerIgnoredGroupThreadWarningDialogReact.bs").setWantsToSee(a.thread_id,!0)},d.$17=function(a){var c=d.props.thread;if(c==null)return;b("MessengerLeaveGroupAction").leaveGroup(c,d.props.viewer);d.$21(a)},d.$20=function(a){var c=d.props.thread;if(c==null)return;var e=c.thread_id;g.changeFolder(e,b("MessagingTagConstants").other);b("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(a,c,d){new a().setEvent(c.IGNORE_CONFIRMED).setThreadID(b("MercuryIDs").getThreadFBIDFromThreadID(e)).setPlatform(d.MESSENGERDOTCOM).log()},"MessengerConversationContainer.react");d.$21(a)},d.$18=function(a){d.$21(a)},d.$13=function(){if(d.state.isLoading||d.state.isLoaded)return;d.setState({isLoading:!0});d.$1.fetchMoreMessages()||d.setState({isLoading:!1,isLoaded:!0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentWillUnmount=function(){this.$2&&this.$2.release(),window.clearTimeout(this.$6)};d.componentDidMount=function(){this.$8(this.props.threadID),this.$9()?this.$10():this.$11()&&this.$12()};d.componentDidUpdate=function(a){var b=this.props.threadID!==a.threadID;b&&(this.$9()?this.$10(a.threadID):this.$11()&&this.$12(a.threadID))};d.UNSAFE_componentWillReceiveProps=function(a){this.props.threadID!==a.threadID&&(this.setState({isLoading:!0,messages:b("immutable").List()}),this.$8(a.threadID))};d.render=function(){var a=this,c=this.state.messages;c=c.some(function(a){return a.log_message_type===b("MercuryLogMessageType").SERVER_ERROR});b("MessengerConfig").ErrorDialog&&c&&!this.$7&&b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(h,{onMount:function(){return a.$7=!0}})});return b("React").createElement(b("MessengerConversation.react"),{className:this.props.className,contact:this.props.contact,deliveryTimestamp:this.props.deliveryTimestamp,fetchMessages:this.$13,isCanonical:b("MercuryIDs").isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,hideContextBanner:this.props.hideContextBanner,messages:this.state.messages,onRead:this.props.onMarkRead,onVoiceClipCreate:this.props.onVoiceClipCreate,onReplyToMessage:this.props.onReplyToMessage,readReceipts:this.props.readReceipts,ref:"conversation",thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer,bottomOffset:this.props.bottomOffset})};d.handleResize=function(){this.refs.conversation.handleResize()};d.isScrolledToBottom=function(){return!!(this.refs.conversation&&this.refs.conversation.isScrolledToBottom())};d.$9=function(){__p&&__p();var a=this,c=this.props.thread;if(c==null)return!1;var d=c.thread_id;if(!this.$15())return!1;var e=!1;b("MessengerState.bs").compute(this.props.viewer,function(d){d=d.blocked_ids;b("MercuryIgnoredBlockedParticipants.bs").isPresentInGroupThread(a.props.viewer,d,c)&&(e=!0)});if(!e)return!1;d=b("MessengerBlockedGroupThreadWarningDialogReact.bs").getWantsToSee(d);return d?!1:!0};d.$11=function(){__p&&__p();var a=this.props.thread;if(a==null)return!1;var c=a.thread_id;if(!this.$15())return!1;if(a.folder!=="inbox")return!1;if(!b("MessengerParticipantUtils.bs").areParticipantsInGroupThread(this.props.fbid,this.props.ignoredIds,a))return!1;a=b("MessengerIgnoredGroupThreadWarningDialogReact.bs").getWantsToSee(c);return a?!1:!0};d.$15=function(){var a=this.props.thread;if(a==null)return!1;if(b("MercuryIDs").isCanonical(this.props.threadID))return!1;return!a.is_subscribed?!1:!0};d.$10=function(a){var c=this,d=this.props.thread,e=[];b("MessengerState.bs").compute(this.props.viewer,function(a){a=a.blocked_ids;a=b("MercuryIgnoredBlockedParticipants.bs").participantsInGroupThread(c.props.viewer,a,d);a.length>=1&&a.forEach(function(a){b("MessengerParticipants.bs").get(a,function(a){e.push(a.name)})})});b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(i,{onSee:c.$16,onLeave:c.$17,onCancel:c.$18,prevThreadID:a,blockedNames:e})})};d.$12=function(a){var c=this;b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onSee:c.$19,onIgnore:c.$20,onCancel:c.$18,prevThreadID:a,threadID:b("MercuryIDs").getThreadFBIDFromThreadID(c.props.threadID)})})};d.$21=function(a){a==null&&b("MessengerActions").selectThread(null),b("MessengerActions").selectThread(a)};d.$22=function(){return l&&this.props.thread!=null&&this.props.thread.unread_count!=null&&this.props.thread.unread_count>0&&this.props.thread.unread_count<k?b("MessengerConfig").MessageLoadCount+this.props.thread.unread_count:b("MessengerConfig").MessageLoadCount};d.$8=function(a){__p&&__p();var c=this;if(!a)return;this.setState({isLoaded:!1});this.$1&&this.$1.destroy();this.$7=!1;this.$1=new(b("MercuryMessageStore"))(a,this.$22());window.clearTimeout(this.$6);this.$6=window.setTimeout(function(){c.props.thread&&c.props.thread.message_count<1&&c.setState({isLoaded:!0,isLoading:!1})},6e3);this.$2&&this.$2.release();this.$2=new(b("SubscriptionsHandler"))();this.$2.addSubscriptions(this.$1.subscribe(function(a){c.setState({messages:c.$23(b("immutable").List(a.messages)),isLoading:!1})}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(b){if(a!==b.thread_id)return;c.$3=!0;c.$4=b;c.setState(function(a){return{messages:c.$23(a.messages)}});window.clearInterval(c.$5);c.$5=window.setInterval(c.$14,50)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(a){window.clearInterval(c.$5)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(a){window.clearInterval(c.$5)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,function(){c.$3=!1,c.$4=null}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP_EMOJI,function(){c.$3=!1,c.$4=null}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").REMOVE,function(){window.clearInterval(c.$5),c.$3=!1,c.setState(function(a){return{messages:c.$23(a.messages)}})}))};d.$23=function(a){this.$3?a=a.set(a.size,this.$4):(a=a.filterNot(function(a){return a.is_like_preview}),this.$4=null);return a};return c}(b("React").PureComponent);c.propTypes={contact:a.instanceOf(b("ImmutableObject")),deliveryTimestamp:a.number.isRequired,readReceipts:a.any,fbid:a.string.isRequired,hideContextBanner:a.bool,ignoredIds:a.any,onMarkRead:a.func.isRequired,onVoiceClipCreate:a.func,onReplyToMessage:a.func,thread:a.object,threadID:a.string.isRequired,viewer:a.string.isRequired,bottomOffset:a.number};e.exports=c}),null);
__d("MessengerDetailViewHeaderContainer.react",["ImmutableObject","MercuryIDs","MercuryThreadIDMap","MercuryTypeaheadConstants","MessengerActions","MessengerComposerActions","MessengerComposeViewHeader.react","MessengerDetailViewHeaderReact.bs","MessengerState.bs","MessengerView","React","immutable","shallowEqual"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerDetailViewHeaderReact.bs").jsComponent;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){__p&&__p();var c=a.getUniqueID(),e=a.getType(),f=a.getAuxiliaryData()||{};if(e===b("MercuryTypeaheadConstants").THREAD_TYPE){var g=b("MercuryThreadIDMap").getForFBID(d.props.viewer);g.getClientIDFromServerID(c,function(a){b("MessengerComposerActions").moveDraftToNextThread(a),b("MessengerActions").selectThread(a)});b("MessengerComposerActions").exitComposeState()}else if(c===d.props.viewer&&d.props.recipients.size===0||e===b("MercuryTypeaheadConstants").PAGE_TYPE||e===b("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE&&!f.canViewerAddToGroupChat){g=b("MercuryIDs").getThreadIDFromUserID(c);b("MessengerComposerActions").moveDraftToNextThread(g);b("MessengerComposerActions").exitComposeState();b("MessengerActions").selectThread(b("MercuryIDs").getThreadIDFromUserID(c))}else b("MessengerComposerActions").addToken(a)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.shouldComponentUpdate=function(a){var c=a.contactData;a=babelHelpers.objectWithoutPropertiesLoose(a,["contactData"]);var d=this.props,e=d.contactData;d=babelHelpers.objectWithoutPropertiesLoose(d,["contactData"]);return!b("shallowEqual")(a,d)||!b("shallowEqual")(c,e)};d.render=function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?b("React").createElement(b("MessengerComposeViewHeader.react"),{forceHideClearButton:!0,onAddRecipient:this.$1,onRemoveRecipient:this.$2,onResize:this.props.onResize,thread:this.props.thread,recipients:this.props.recipients,viewer:this.props.viewer,isWorkUser:this.props.isWorkUser,shouldShowCreateGroupButton:this.props.shouldShowCreateGroupButton,onCreateGroupButtonClicked:this.props.onCreateGroupButtonClicked}):b("React").createElement(g,{contactData:this.props.contactData,infoPanelCollapsed:this.props.infoPanelCollapsed,onInfoPanelToggle:this.props.onInfoPanelToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,shouldUseRelay:!1,montageData:b("MessengerState.bs").montage(this.props.messengerState)})};d.$2=function(a){b("MessengerComposerActions").removeToken(a)};return c}(b("React").Component);c.propTypes={contactData:a.object,infoPanelCollapsed:a.bool.isRequired,onInfoPanelToggle:a.func.isRequired,onResize:a.func.isRequired,participants:a.instanceOf(b("immutable").Map).isRequired,recipients:a.instanceOf(b("immutable").List).isRequired,thread:a.instanceOf(b("ImmutableObject")),view:a.string,viewer:a.string.isRequired,isWorkUser:a.bool.isRequired,messengerState:a.array.isRequired,shouldShowCreateGroupButton:a.bool,onCreateGroupButtonClicked:a.func};e.exports=c}),null);
__d("MessengerPresenceStatusUtils",["fbt","AvailableListConstants","CurrentUser","LastActiveTimes","MercuryIDs","PresenceStatus","WorkChatAvailabilityStatusLoader","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={getStatusFromCanonicalThread:function(a,c){__p&&__p();var d=null;if(c&&c.is_canonical){a=a.get(b("MercuryIDs").getParticipantIDFromFromThreadID(c.thread_id));if(a){a.is_messenger_user?c=b("CurrentUser").isWorkUser()?g._("Workplace Chat"):g._("Messenger"):c=b("CurrentUser").isWorkUser()?g._("Workplace"):g._("Facebook");var e=null,f=!1;if(b("WorkChatAvailabilityStatusLoader").isLoaded()&&b("CurrentUser").isWorkUser()&&b("gkx")("678573")){var h=b("WorkChatAvailabilityStatusLoader").getStoreEnforce();e={isDoNotDisturb:h.getIsDoNotDisturb(a.fbid),description:h.getDescriptionWithUserName(a.short_name,a.fbid)};f=e.isDoNotDisturb}h=b("PresenceStatus").get(a.fbid);var i,j;h!==b("AvailableListConstants").ACTIVE&&(i=b("LastActiveTimes").get(a.fbid),j=b("LastActiveTimes").getShortDisplay(a.fbid));h=h===b("AvailableListConstants").ACTIVE&&!f;d={contact:a,platform:c,isUserActive:h,availabilityStatusData:e,lastActiveTS:f?null:i,lastActive:f?null:j}}}return d}};e.exports=a}),null);
__d("MessengerContactListRowActions",["AsyncRequest","FantaFRXUtil","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MessengerContactActions.bs","MessengerContactAdapters","URI","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerContactActions.bs").actions;a=function(a){__p&&__p();var c=a.action,d=a.contact,e=a.viewer,f=a.thread,h=a.participants;a=a.handleContactSelect;d=b("MessengerContactAdapters").fromMercuryParticipant(d);if(b("MercuryIDs").getUserIDFromParticipantID(d.uid)!==e)switch(c){case g.MESSAGE:a(d);break;case g.PROFILE:h=h.get(d.uid);h&&h.href?window.open(h.href):a(d);break;case g.REMOVE:if(!b("MercuryThreadInfo").isEmptyLocalThread(f)){h=new(b("URI"))("/chat/remove_participants/");h.addQueryData({uid:b("MercuryIDs").getUserIDFromParticipantID(d.uid),tid:f.thread_fbid});a=new(b("AsyncRequest"))(h);a.send()}break;case g.REPORT_GROUP_CHAT_USER:b("FantaFRXUtil").FRXClicked(f.thread_id,!0,d.uid);break}switch(c){case g.REMOVE_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(f)||b("MercuryThreadActions").getForFBID(e).changeGroupAdmins(f.thread_fbid,[b("MercuryIDs").getUserIDFromParticipantID(d.uid)],!1);break;case g.ADD_OWNER:b("MercuryThreadInfo").isEmptyLocalThread(f)||b("MercuryThreadActions").getForFBID(e).changeGroupAdmins(f.thread_fbid,[b("MercuryIDs").getUserIDFromParticipantID(d.uid)],!0);break}};e.exports={handleContactActions:a}}),null);
__d("MessengerInfoPanelAssociatedObjectSection.react",["cx","fbt","CurrentUser","Image.react","Link.react","MessageThreadAssociatedObjectKey","MessengerInfoPanelSectionReact.bs","React","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerInfoPanelSectionReact.bs").jsComponent;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a,c=this.props,d=c.isCollapsed,e=c.onToggle,f=c.associatedObject;c=c.customColor;a=(a=f[b("MessageThreadAssociatedObjectKey").VERSE_GROUP_LINK])!=null?a:f[b("MessageThreadAssociatedObjectKey").ACTION_LINK]+"?ref=MessengerInfoPanelAssociatedObjectSection";return b("React").createElement(i,{customColor:c,isCollapsible:!0,isCollapsed:d,onToggle:e,title:h._("\u0e40\u0e1b\u0e47\u0e19\u0e2a\u0e48\u0e27\u0e19\u0e2b\u0e19\u0e36\u0e48\u0e07\u0e02\u0e2d\u0e07")},b("React").createElement(b("Link.react"),{href:a,target:"_blank",style:{textDecoration:"none"},className:"_35-k"},this.$1(),this.$2()))};d.$1=function(){var a=this.props.associatedObject;a=a[b("MessageThreadAssociatedObjectKey").PROFILE_PICTURE];return b("React").createElement("div",null,b("React").createElement(b("Image.react"),{className:"_35-n",src:a}))};d.$2=function(){var a=this.props.associatedObject,c=a[b("MessageThreadAssociatedObjectKey").NAME],d=b("TimeSpentRoomTypeEnum")[a[b("MessageThreadAssociatedObjectKey").ROOM_TYPE]];a=a[b("MessageThreadAssociatedObjectKey").VERSE_GROUP_LINK];var e=b("CurrentUser").isWorkUser()?"Workplace":"Facebook";return b("React").createElement("div",{className:"_35-o"},b("React").createElement("div",{className:"_35-p"},c),b("React").createElement("div",{className:"_35-q"},!a&&h._({"GROUP":"\u0e44\u0e1b\u0e17\u0e35\u0e48\u0e01\u0e25\u0e38\u0e48\u0e21 {productName}","EVENT":"\u0e44\u0e1b\u0e17\u0e35\u0e48\u0e07\u0e32\u0e19\u0e01\u0e34\u0e08\u0e01\u0e23\u0e23\u0e21 {productName}"},[h._param("productName",e),h._enum(d,b("TimeSpentRoomTypeEnum$FbtEnum"))]),a&&h._("\u0e44\u0e1b\u0e17\u0e35\u0e48\u0e01\u0e25\u0e38\u0e48\u0e21\u0e41\u0e0a\u0e17\u0e1a\u0e19 Facebook")))};return c}(b("React").PureComponent);c.propTypes={isCollapsed:a.bool.isRequired,onToggle:a.func.isRequired,customColor:a.string,associatedObject:a.instanceOf(Object).isRequired};e.exports=c}),null);
__d("MessengerApprovalRequester.react",["cx","fbt","CurrentUser","Link.react","MercuryIDs","MessengerParticipants.bs","MercuryThreadActions","MessengerCheckmarkIconSVGM4React.re","MessengerContactImageReact.bs","MessengerCrossIconSVGM4React.re","MessengerDotComAndInboxM4Check.bs","MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation","MessengerGroupRequestSource","MessengerTextWithEmoticons.react","React","ShimButton.react","WebGraphQL"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadActions").get(),j=b("MessengerCheckmarkIconSVGM4React.re").make,k=b("MessengerContactImageReact.bs").jsComponent,l=b("MessengerCrossIconSVGM4React.re").make,m=32,n=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w _7tla":"_3szo";function o(a,c,d){__p&&__p();if(!c||d===null)return null;var e=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(c));e=e&&e.name;if(!e)return null;if(d===b("MessengerGroupRequestSource").ADD)return b("CurrentUser").isWorkUser()&&a===c?h._("\u0e02\u0e2d\u0e40\u0e02\u0e49\u0e32\u0e23\u0e48\u0e27\u0e21"):h._("\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e42\u0e14\u0e22 {inviter}",[h._param("inviter",e)]);else if(d===b("MessengerGroupRequestSource").JOIN_THROUGH_LINK)return h._("\u0e40\u0e0a\u0e34\u0e0d\u0e42\u0e14\u0e22 {inviter}",[h._param("inviter",e)]);return null}function p(a){var c=a.name,d=a.imageSRC,e=a.inviterFBID,f=a.isMessengerUser,g=a.requestSource;a=a.userFBID;c=b("React").createElement(b("MessengerTextWithEmoticons.react"),{renderEmoticons:!0,renderEmoji:!0,text:c});a=o(a,e,g);e=a?b("React").createElement("span",{className:"_4e87"},b("React").createElement("div",null,c),b("React").createElement("div",{className:"_4egt"},a)):b("React").createElement("span",{className:"_3tkx"},c);return b("React").createElement("div",{className:"_3szq _4fq"},b("React").createElement(k,{className:"_5l39 _5rmm",isMessengerUser:f,size:m,src:d}),e)}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){if(b("MessengerDotComAndInboxM4Check.bs").yes)return this.$1();else return this.$2()};d.$1=function(){var a=this.props,c=a.isAdminRequired,d=a.isMessengerUser,e=a.imageSRC,f=a.name,g=a.inviterFBID,i=a.requestSource;a=a.userFBID;c=c?h._("\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34"):h._("\u0e22\u0e2d\u0e21\u0e23\u0e31\u0e1a");return b("React").createElement("div",{className:n},b("React").createElement(p,{userFBID:a,name:f,imageSRC:e,inviterFBID:g,isMessengerUser:d,requestSource:i}),b("React").createElement("div",{className:"_4fs _7tlb"},b("React").createElement(b("ShimButton.react"),{"aria-label":h._("\u0e44\u0e21\u0e48\u0e2a\u0e19\u0e43\u0e08"),className:"_7tlc _3-91",href:"#",onClick:this.$3.bind(this)},b("React").createElement(l,{size:20})),b("React").createElement(b("ShimButton.react"),{"aria-label":c,className:"_7tlc",href:"#",onClick:this.$4.bind(this)},b("React").createElement(j,{size:20}))))};d.$2=function(){var a=this.props,c=a.isAdminRequired,d=a.isMessengerUser,e=a.imageSRC,f=a.name,g=a.inviterFBID,i=a.requestSource;a=a.userFBID;c=c?h._("\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34"):h._("\u0e22\u0e2d\u0e21\u0e23\u0e31\u0e1a");return b("React").createElement("div",{className:n},b("React").createElement(p,{userFBID:a,name:f,imageSRC:e,inviterFBID:g,isMessengerUser:d,requestSource:i}),b("React").createElement("div",{className:"_3ihq _4fs"},b("React").createElement(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$4.bind(this)},c),b("React").createElement("span",{className:"_1m8c"}),b("React").createElement(b("Link.react"),{className:"_5a73",href:"#",onClick:this.$3.bind(this)},h._("\u0e44\u0e21\u0e48\u0e2a\u0e19\u0e43\u0e08"))))};d.$4=function(a){a=this.props;var c=a.isAdminRequired,d=a.threadFBID;a=a.userFBID;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[a],response:"ACCEPT",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):i.acceptToJoinableGroup(d,a)};d.$3=function(a){a=this.props;var c=a.isAdminRequired,d=a.threadFBID;a=a.userFBID;c?b("WebGraphQL").exec(new(b("MessengerGroupPersonalApprovalRequestsToRespondResponseMutationWebGraphQLMutation"))({data:{client_mutation_id:"0",actor_id:b("CurrentUser").getID(),thread_fbid:d,user_ids:[a],response:"DENY",surface:"ADMIN_MODEL_APPROVAL_CENTER"}})):i.rejectToJoinableGroup(d,a)};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerInfoPanelGroupSection.react",["cx","fbt","FBToggleSwitch.react","MessengerApprovalQueueUtils","immutable","MercuryThreadActions","MessengerAdminGroupUtils","MessengerApprovalModeTypes","MessengerApprovalRequester.react","MessengerDotComAndInboxM4Check.bs","MessengerInfoPanelSectionReact.bs","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MercuryThreadActions").get(),j=b("MessengerInfoPanelSectionReact.bs").jsComponent;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;c.state={approvalQueue:b("immutable").Map()};return c}var d=c.prototype;d.componentDidMount=function(){this.$1(this.props.thread)};d.render=function(){return b("React").createElement("div",null,b("React").createElement(j,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:this.props.isOptionsCollapsed,onToggle:this.props.onOptionsToggle,title:h._("\u0e15\u0e31\u0e27\u0e40\u0e25\u0e37\u0e2d\u0e01\u0e01\u0e25\u0e38\u0e48\u0e21")},b("React").createElement("div",{className:"_3iho"},this.$2())),this.$3())};d.UNSAFE_componentWillReceiveProps=function(a){this.$1(a.thread)};d.$1=function(a){var c=this;if(!a)return;b("MessengerApprovalQueueUtils").getApprovalQueueParticipants(a,function(a){return c.setState({approvalQueue:a})})};d.$2=function(){var a=this.props,c=a.viewer,d=a.thread;a=b("MessengerAdminGroupUtils").isApprovalOpenThread(d);if(!b("MessengerAdminGroupUtils").showJoinableApprovalToggle(d,c))return null;c=b("MessengerAdminGroupUtils").isAdminRequired(d);var e=c?h._("\u0e15\u0e49\u0e2d\u0e07\u0e44\u0e14\u0e49\u0e23\u0e31\u0e1a\u0e01\u0e32\u0e23\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e08\u0e32\u0e01\u0e1c\u0e39\u0e49\u0e14\u0e39\u0e41\u0e25"):h._("\u0e01\u0e32\u0e23\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e2a\u0e21\u0e32\u0e0a\u0e34\u0e01\u0e43\u0e2b\u0e21\u0e48");c=c?b("React").createElement("div",{className:"_3ihp"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _87b_":"")},h._("\u0e01\u0e33\u0e2b\u0e19\u0e14\u0e43\u0e2b\u0e49\u0e1c\u0e39\u0e49\u0e14\u0e39\u0e41\u0e25\u0e15\u0e49\u0e2d\u0e07\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e04\u0e33\u0e02\u0e2d\u0e40\u0e02\u0e49\u0e32\u0e23\u0e48\u0e27\u0e21\u0e41\u0e0a\u0e17\u0e01\u0e25\u0e38\u0e48\u0e21\u0e17\u0e31\u0e49\u0e07\u0e2b\u0e21\u0e14")):b("React").createElement("div",{className:"_3ihp"},h._("\u0e2d\u0e19\u0e38\u0e21\u0e31\u0e15\u0e34\u0e27\u0e48\u0e32\u0e43\u0e04\u0e23\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e40\u0e02\u0e49\u0e32\u0e23\u0e48\u0e27\u0e21\u0e01\u0e25\u0e38\u0e48\u0e21\u0e44\u0e14\u0e49"));return b("React").createElement("div",{className:"_3szo _2ya9"},b("React").createElement("div",{className:"_3szq"},e,c),b("React").createElement(b("FBToggleSwitch.react"),{animate:!0,"aria-label":e,checked:!a,onToggle:function(a){return i.setApprovalMode(a?b("MessengerApprovalModeTypes").APPROVALS:b("MessengerApprovalModeTypes").OPEN,d)}}))};d.$3=function(){var a=this.props,c=a.viewer,d=a.thread,e=d.thread_fbid;if(!e||!b("MessengerAdminGroupUtils").showApprovalQueue(d,c))return null;a=b("MessengerAdminGroupUtils").getPendingRequestNumber(d);c=b("MessengerAdminGroupUtils").isAdminRequired(d)?h._("\u0e04\u0e33\u0e02\u0e2d\u0e40\u0e1b\u0e47\u0e19\u0e2a\u0e21\u0e32\u0e0a\u0e34\u0e01 ({memberRequestCount})",[h._param("memberRequestCount",a)]):h._("\u0e04\u0e33\u0e02\u0e2d\u0e07\u0e17\u0e35\u0e48\u0e01\u0e33\u0e25\u0e31\u0e07\u0e23\u0e2d\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23 ({pendingRequestCount})",[h._param("pendingRequestCount",a)]);return b("React").createElement(j,{customColor:this.props.thread.solid_color,isCollapsible:!0,isCollapsed:this.props.isApprovalsCollapsed,onToggle:this.props.onApprovalToggle,title:c},b("React").createElement("div",{className:"_3iho _3oh-"},this.state.approvalQueue.map(function(a){var c=a.fbid;return c&&b("React").createElement(b("MessengerApprovalRequester.react"),{key:a.id,imageSRC:a.image_src,inviterFBID:a.inviter_id,requestSource:a.request_source,isAdminRequired:b("MessengerAdminGroupUtils").isAdminRequired(d),isMessengerUser:a.is_messenger_user,name:a.name,threadFBID:e,userFBID:c})}).toArray()))};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerThreadPhotoUploader.react",["cx","fbt","requireCond","FileInput","FileInputUploader","Link.react","MercuryConfig","MessengerDotComAndInboxM4Check.bs","cr:943115","React","ReactDOM","SubscriptionsHandler"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerThreadPhotoUploader",_fileInput:null,_subscriptions:null,_uploader:null,_uploadIsInProgress:!1,propTypes:{onComplete:a.func.isRequired,onFail:a.func,onStart:a.func,uri:a.string},getDefaultProps:function(){return{uri:b("MercuryConfig").upload_url}},componentDidMount:function(){var a=b("ReactDOM").findDOMNode(this.refs.input),c=new(b("FileInput"))(b("ReactDOM").findDOMNode(this.refs.form),b("ReactDOM").findDOMNode(this.refs.uploadButton),a);a=new(b("FileInputUploader"))(a).setURI(this.props.uri).setAllowCrossOrigin(!0).setAllowCrossPageTransition(!0).setData({images_only:!0});var d=new(b("SubscriptionsHandler"))();d.addSubscriptions(a.subscribe("success",this._handleAllUploadsCompleted),a.subscribe("failure",this._handleLastUploadFailed));this._subscriptions=d;this._uploader=a;this._fileInput=c},componentWillUnmount:function(){this._uploadIsInProgress||this._doUnmountComponents()},render:function(){var a=h._("\u0e04\u0e25\u0e34\u0e01\u0e40\u0e1e\u0e37\u0e48\u0e2d\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e20\u0e32\u0e1e");return b("React").createElement("form",{action:this.props.uri,method:"post",ref:"form"},b("React").createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),b("React").createElement("input",{type:"hidden",name:"images_only",value:"true"}),b("React").createElement("div",{className:"_m _4q60"+(b("MessengerDotComAndInboxM4Check.bs").yes?"":" _2lyy")+(b("MessengerDotComAndInboxM4Check.bs").yes?" _80cm":"")},b("MessengerDotComAndInboxM4Check.bs").yes?b("cr:943115")&&b("cr:943115").make({fill:"#000000",size:24}):null,b("React").createElement(b("Link.react"),{className:"_4q61 _2lyz",ref:"uploadButton"},b("React").createElement("span",{"aria-hidden":"true"},h._("\u0e41\u0e01\u0e49\u0e44\u0e02"))),b("React").createElement("input",{"aria-label":h._("\u0e40\u0e1b\u0e25\u0e35\u0e48\u0e22\u0e19\u0e23\u0e39\u0e1b\u0e20\u0e32\u0e1e\u0e01\u0e25\u0e38\u0e48\u0e21"),type:"file",className:"_n",name:"attachment[]",accept:".jpg,.png,.jpeg,.bmp,.tif,.tiff",ref:"input",onChange:this._handleFileInputChange,title:a})))},_handleAllUploadsCompleted:function(a,b){this._uploadIsInProgress=!1,this.props.onComplete&&this.props.onComplete(b.response.payload),this.isMounted()||this._doUnmountComponents()},_handleLastUploadFailed:function(a,b){this._uploadIsInProgress=!1,this.props.onFail&&this.props.onFail(b),this.isMounted()||this._doUnmountComponents()},_handleFileInputChange:function(a){a.target.value&&this._uploader&&(this._uploader.send(),this._uploadIsInProgress=!0,this.props.onStart&&this.props.onStart())},_doUnmountComponents:function(){this._subscriptions&&this._subscriptions.release(),this._fileInput&&this._fileInput.destroy(),delete this._subscriptions,delete this._uploader}});e.exports=c}),null);
__d("MessengerInfoPanelContactActions.react",["cx","fbt","ImmutableObject","MercuryIDs","MessengerAdminGroupUtils","MessengerContactActions.bs","MessengerDialogs.bs","MessengerMakeAsOwnerDialogReact.bs","MessengerMenu.react","MessengerParticipants.bs","MessengerPopoverMenu.react","MessengerRemoveAsOwnerDialogReact.bs","MessengerRemoveFromGroupDialogReact.bs","MessengerState.bs","MessengerURIStore","React","ReactComponentWithPureRenderMixin","ShimButton.react","StoreAndPropBasedStateMixin","gkx","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerContactActions.bs").actions,j=b("MessengerMakeAsOwnerDialogReact.bs").jsComponent,k=b("MessengerRemoveAsOwnerDialogReact.bs").jsComponent,l=b("MessengerRemoveFromGroupDialogReact.bs").jsComponent,m=b("MessengerMenu.react").Item,n=b("MessengerMenu.react").Separator;a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerInfoPanelContactActions",mixins:[b("ReactComponentWithPureRenderMixin"),b("StoreAndPropBasedStateMixin")(b("MessengerURIStore"))],propTypes:{admins:a.object,extrasEnabled:a.bool.isRequired,contact:a.instanceOf(b("ImmutableObject")).isRequired,isAdminRequired:a.bool.isRequired,isOpen:a.bool,onAction:a.func.isRequired,onToggle:a.func.isRequired,viewer:a.string.isRequired},statics:{calculateState:function(a){var c=b("MessengerURIStore").getState().activeThreadID;a=c?b("MessengerState.bs").getThreadMetaNow(a.viewer,c):null;return{thread:a}}},render:function(){__p&&__p();var a=this,c=this._isViewerAdmin(),d=b("MessengerAdminGroupUtils").isAdmin(this.props.admins,this.props.contact.uid),e=this._isUserViewer(),f=b("MessengerAdminGroupUtils").canRemoveAdmin(c,d,this._getUserAdminType(),this.state.thread)?b("React").createElement(m,{label:h._("\u0e15\u0e31\u0e14\u0e2a\u0e34\u0e17\u0e18\u0e34\u0e4c\u0e01\u0e32\u0e23\u0e40\u0e1b\u0e47\u0e19\u0e1c\u0e39\u0e49\u0e14\u0e39\u0e41\u0e25"),onclick:this._handleRemoveAsOwnerClick}):null,g=null;c=b("MessengerAdminGroupUtils").canMakeOthersAdmins(c,d,this.state.thread);d=b("MessengerAdminGroupUtils").canMakeSelfAdmin(e,this.state.thread);(c||d)&&(g=b("React").createElement(m,{label:h._("\u0e15\u0e31\u0e49\u0e07\u0e40\u0e1b\u0e47\u0e19\u0e1c\u0e39\u0e49\u0e14\u0e39\u0e41\u0e25"),onclick:this._hanleMakeOwnerClick}));if(e)if(g||f)c=b("React").createElement(b("MessengerMenu.react"),null,g,f);else return null;else c=b("React").createElement(b("MessengerMenu.react"),null,b("React").createElement(m,{label:h._("\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21"),onclick:this._makeActionHandler(i.MESSAGE)}),this.props.contact.href?b("React").createElement(m,{label:h._("\u0e14\u0e39\u0e42\u0e1b\u0e23\u0e44\u0e1f\u0e25\u0e4c"),onclick:this._makeActionHandler(i.PROFILE)}):null,b("gkx")("946333")?b("React").createElement(m,{label:h._("\u0e23\u0e32\u0e22\u0e07\u0e32\u0e19\u0e1c\u0e39\u0e49\u0e43\u0e0a\u0e49"),onclick:this._makeActionHandler(i.REPORT_GROUP_CHAT_USER)}):null,g,f,this._renderExtras());return b("React").createElement(b("MessengerPopoverMenu.react"),{menu:c,onHide:function(){return a.props.onToggle(!1)},onShow:function(){return a.props.onToggle(!0)}},b("React").createElement(b("ShimButton.react"),{className:b("joinClasses")(this.props.className,"_57gs"+(this.props.isOpen?" _57gt":"")),onClick:this._handleClick}))},_renderExtras:function(){if(!this.props.extrasEnabled)return null;var a=[b("React").createElement(n,{key:"separator"})],c=this._isViewerAdmin();b("MessengerAdminGroupUtils").canRemoveFromGroup(c,this._getUserAdminType(),this.state.thread)&&a.push(b("React").createElement(m,{key:"remove-from-group",label:h._("\u0e25\u0e1a\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e01\u0e25\u0e38\u0e48\u0e21"),onclick:this._handleRemoveClick}));return a.length>=2?a:null},_handleClick:function(a){a.stopPropagation(),a.preventDefault()},_makeActionHandler:function(a){var b=this;return function(c){b._handleClick(c),b.props.onAction(a,c)}},_handleRemoveClick:function(a){var c=this;this._handleClick(a);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(l,{onToggle:c._handleDialogToggle,onRemove:c._handleDialogRemoveClick,isWorkSyncedChat:b("MessengerAdminGroupUtils").isWorkSyncedGroupChat(c.state.thread),isUserBot:c._isUserBot()})})},_handleRemoveAsOwnerClick:function(a){var c=this;this._handleClick(a);var d=b("MessengerParticipants.bs").getNow(this.props.contact.uid);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(k,{isAdminRequired:c.props.isAdminRequired,isLastAdminInThread:c.props.admins&&Object.keys(c.props.admins).length===1,isUserViewer:c._isUserViewer(),name:d&&d.name,onToggle:c._handleDialogToggle,onRemove:c._handleOwnerRemoveClick})})},_handleDialogRemoveClick:function(a){this.props.onAction(i.REMOVE,a)},_handleOwnerRemoveClick:function(a){this.props.onAction(i.REMOVE_OWNER,a)},_hanleMakeOwnerClick:function(a){var c=this;this._handleClick(a);var d=b("MessengerParticipants.bs").getNow(this.props.contact.uid);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(j,{onToggle:c._handleDialogToggle,onMakeOwner:c._handleOwnerAddClick,name:d&&d.name,isAdminRequired:c.props.isAdminRequired,isUserViewer:c._isUserViewer()})})},_handleOwnerAddClick:function(a){this.props.onAction(i.ADD_OWNER,a)},_handleDialogToggle:function(a){a||b("MessengerDialogs.bs").removeDialog()},_isUserViewer:function(){return b("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)===this.props.contact.uid},_isUserBot:function(){return this.props.contact.workForeignEntityInfo===null},_isViewerAdmin:function(){return b("MessengerAdminGroupUtils").isAdmin(this.props.admins,this.props.viewer)},_getUserAdminType:function(){var a=b("MercuryIDs").isValid(this.props.contact.uid)&&b("MercuryIDs").getUserIDFromParticipantID(this.props.contact.uid);return this.props.admins&&a?this.props.admins[a]:null}});e.exports=c}),null);
__d("MessengerInfoPanelManageReview.react",["cx","fbt","Bootloader","ImmutableObject","MercuryIDs","MessengerDotComAndInboxM4Check.bs","MessengerParticipants.bs","MessengerStarIconSVGM4React.bs","MNCommerceDialogStateActions","React","ShimButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;var i=b("MessengerDotComAndInboxM4Check.bs").yes?"_3szo _6y4w":"_3szo";c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(a){a.preventDefault(),b("Bootloader").loadModules(["MNCommerceReviewDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{pageID:d.props.thread.other_user_fbid,onConfirmButtonClick:d.$3})},"MessengerInfoPanelManageReview.react")},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return!this.$1()?null:b("React").createElement(b("ShimButton.react"),{className:i,onClick:this.$2},b("React").createElement("div",{className:"_3szp"},b("MessengerDotComAndInboxM4Check.bs").yes&&b("React").createElement("div",{className:"_6yvp"},b("MessengerStarIconSVGM4React.bs").icon)),b("React").createElement("div",{className:"_3szq"},h._("\u0e43\u0e2b\u0e49\u0e04\u0e30\u0e41\u0e19\u0e19\u0e1b\u0e23\u0e30\u0e2a\u0e1a\u0e01\u0e32\u0e23\u0e13\u0e4c")))};d.$1=function(){var a=b("MercuryIDs").getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!a)return!1;a=b("MessengerParticipants.bs").getNow(a);return!!(a&&a.accepts_messenger_user_feedback)};d.$3=function(a,c,d){if(c===0)return;b("Bootloader").loadModules(["MessengerPlatformBotReviewWriteDataManager"],function(b){b.review(a,c,d.trim())},"MessengerInfoPanelManageReview.react")};return c}(b("React").PureComponent);c.propTypes={thread:a.instanceOf(b("ImmutableObject")).isRequired,viewer:a.string.isRequired};e.exports=c}),null);
__d("MessengerSharedLinks.react",["cx","fbt","Image.react","Layout.react","LayoutColumn.react","LayoutFillColumn.react","Link.react","MercuryMessageStore","MercuryThreadTimestampReact.bs","MercuryTimestamp","MessengerInfoPanelSectionReact.bs","MessengerSpinner.react","MessengerThreadSharedLinksWebGraphQLQuery","React","URI","WebGraphQL","clearTimeout","gkx","isLinkshimURI","promiseDone","setTimeout"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("MercuryThreadTimestampReact.bs").jsComponent,j=b("MessengerInfoPanelSectionReact.bs").jsComponent,k=5,l=36;a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=!1,c.state={canShowMore:!1,isFetchingMore:!1,fetchCount:k,messageThread:null},c.$8=function(){c.$4(c.state.fetchCount+k)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){this.$3=!0,this.$4(this.state.fetchCount),this.$5(this.props.threadID)};d.componentWillUnmount=function(){this.$2&&(b("clearTimeout")(this.$2),delete this.$2),this.$1&&this.$1.destroy(),this.$3=!1};d.componentDidUpdate=function(a,b){var c=this;a.threadFBID!==this.props.threadFBID&&this.setState({messageThread:null,fetchCount:k},function(){c.$4(c.state.fetchCount)})};d.render=function(){var a=this,c;if(!b("gkx")("678615"))return null;c=(c=this.state.messageThread)!=null?(c=c.shared_links)!=null?c.length:c:c;return!this.props.threadFBID||!this.state.messageThread||!this.state.messageThread.shared_links||c==null||c==0?null:b("React").createElement(j,{isCollapsible:!0,isCollapsed:this.props.isCollapsed,customColor:this.props.customColor,onToggle:this.props.onToggle,title:h._("\u0e25\u0e34\u0e07\u0e01\u0e4c\u0e17\u0e35\u0e48\u0e41\u0e0a\u0e23\u0e4c")},b("React").createElement("div",{className:"_2wjt"},this.state.messageThread.shared_links.map(function(b,c){return a.$6(b,c)}),this.$7()))};d.$4=function(a){__p&&__p();var c=this;if(!this.$3)return;var d=this.props.threadFBID;if(!d)return;this.setState({isFetchingMore:!0});b("promiseDone")(b("WebGraphQL").exec(new(b("MessengerThreadSharedLinksWebGraphQLQuery"))({threadFBID:d,count:a})),function(b){var d;if(!c.$3)return!1;var e=(d=b.message_thread)!=null?(d=d.shared_links)!=null?d.length:d:d;c.setState(function(c){return{messageThread:b.message_thread,canShowMore:e?e>=a:!1,isFetchingMore:!1,fetchCount:a}})})};d.$5=function(a){__p&&__p();var c=this;this.$1=new(b("MercuryMessageStore"))(a);this.$1.subscribe(function(a){if(a.messages.length<1)return;var d=a.eventType==b("MercuryMessageStore").MESSAGES_RECEIVED,e=a.eventType==b("MercuryMessageStore").MESSAGES_CHANGED;if(!d&&!e)return;d=a.messages[a.messages.length-1];d.attachments&&d.attachments.length>0&&(c.$2=b("setTimeout")(function(){delete c.$2,c.$4(c.state.fetchCount)},1e3))})};d.$6=function(a,c){var d=a.media&&a.media.image&&a.media.image.uri?b("React").createElement(b("LayoutColumn.react"),null,b("React").createElement(b("Image.react"),{className:"_2wjy",src:a.media.image.uri,style:{height:l,width:l}})):null,e=null;a.sharer&&a.sharer.name?e=b("React").createElement("div",{className:"_2wj_"},h._("\u0e2a\u0e48\u0e07\u0e42\u0e14\u0e22 {sender_name}",[h._param("sender_name",a.sharer.name)])):a.description&&a.description.text?e=b("React").createElement("div",{className:"_2wj_"},a.description.text):e=b("React").createElement("div",{className:"_2wj_"},this.$9(a.url));return b("React").createElement("li",{key:c},b("React").createElement(b("Link.react"),{className:"_2pit _2wju",style:{color:this.props.customColor},target:"_blank",href:a.url},b("React").createElement(b("Layout.react"),{className:"_2wjz clearfix"},d,b("React").createElement(b("LayoutFillColumn.react"),{className:"_653d _159d"},b("React").createElement("div",{className:"_2wj-"},a.title_with_entities.text),e),b("React").createElement(b("LayoutColumn.react"),null,a.creation_time?this.$10(a.creation_time*1e3):null))))};d.$10=function(a){return b("React").createElement(i,{className:"_1ht7 _159e",time:a,title:b("MercuryTimestamp").getAbsoluteTimestamp(a),text:b("MercuryTimestamp").getRelativeTimestamp(a)})};d.$9=function(a){if(a==null)return"";var c=new(b("URI"))(a);if(!b("isLinkshimURI")(c))return a;c=c.getQueryData().u;return!c?a:c};d.$7=function(){if(!this.state.canShowMore)return null;return this.state.isFetchingMore?b("React").createElement("div",{className:"_2n20"},b("React").createElement(b("MessengerSpinner.react"),{color:"gray"})):b("React").createElement(b("Link.react"),{className:"_3oh- _fy2 _2wjv",onClick:this.$8},h._("\u0e41\u0e2a\u0e14\u0e07\u0e40\u0e1e\u0e34\u0e48\u0e21\u0e40\u0e15\u0e34\u0e21..."))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerThreadInfoPanelScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={prevHeight:-1,prevIsScrolledToBottom:!1},d.$1=null,d.isScrolledToBottom=function(){if(d.refs.scrollable)return d.refs.scrollable.isScrolledToBottom();else return!0},d.getHeight=function(){if(d.refs.scrollable)return b("ReactDOM").findDOMNode(d.refs.scrollable).offsetHeight;else return 0},d.$2=function(){var a=d.isScrolledToBottom(),b=d.getHeight();(d.state.prevIsScrolledToBottom!==a||d.state.prevHeight!==b)&&d.setState({prevHeight:b,prevIsScrolledToBottom:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement(b("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$2},b("React").createElement(b("MessengerScrollableArea.react"),{height:"100%",onScroll:this.$2,ref:"scrollable"},this.props.children(this.state.prevHeight,this.state.prevIsScrolledToBottom,this.isScrolledToBottom,this.getHeight)))};return c}(b("React").Component);c.propTypes={children:a.func.isRequired};e.exports=c}),null);
__d("MessengerDetailView.react",["cx","fbt","invariant","Bootloader","BootloadOnRender.react","CurrentUser","CustomColorHighlighting.react","DataTransfer","EventReminderActions","EventRemindersGating","JSResource","LazyComponent.react","MercuryCanonicalGroupThreadStore","MercuryConfig","MercuryIDs","MercuryThreadActions","MercuryThreadInfo","MessengerActions","MessengerComposerContainer.react","MessengerComposerStore","MessengerConversation.react","MessengerConversationContainer.react","MessengerDeliveryReceipt.bs","MessengerDetailViewHeaderContainer.react","MessengerDomIDs.bs","MessengerDotComAndInboxM4Check.bs","MessengerErrorBoundary.react","MessengerGalahadGating.bs","MessengerParticipants.bs","MessengerPresenceStatusUtils","MessengerSettingsActions","MessengerSettingsStore","MessengerState.bs","MessengerThreadInfoPanelContainer.react","MessengerThreadSearchActions","MessengerThreadSearchStore","MessengerURIStore","MessengerView","MessengerWebDriverTestIDs","MontageActions","Parent","PresenceStatus","React","SubscriptionsHandler","WorkChatAvailabilityStatusLoader","WorkChatRedesignedMessageListCheck.re","WorkGalahadSettings","gkx","immutable","WorkchatAppBridge","AvailableList","emptyFunction","ifRequired","joinClasses","lazyLoadComponent","promiseDone","requireCond","cr:895572","shallowCompare"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerDomIDs.bs").ids;b("WorkchatAppBridge").init();b("AvailableList");var k=b("lazyLoadComponent")(b("JSResource")("WorkChatGroupNameComposeViewHeader.react").__setRef("MessengerDetailView.react"));a=b("React").PropTypes;function l(a,c,d,e){if(!b("EventRemindersGating").shouldShowPlansOnMessengerCom)return null;if(!c)return null;return!a?null:b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerEventPlanContainer.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:c,participants:d,viewer:e})})}c=b("React").createClass({displayName:"MessengerDetailView",_composer:void 0,_refsConversationContainer:null,_subscriptionsHandler:null,_participantSubscription:null,_userStatusLiveSubscription:null,_userIDStatusLiveSubscription:null,propTypes:{activeThread:a.object,activeThreadID:a.string,blockedIds:a.any,deliveryReceipts:a.object,messengerState:a.array.isRequired,readReceipts:a.any,view:a.string,viewer:a.string.isRequired,isWorkUser:a.bool.isRequired,hostProps:a.object,DetailViewHeaderComponent:a.any.isRequired,hideGroupInfoInThreadInfoPanel:a.bool,hideContextBanner:a.bool,openPostComposerInSameWindow:a.bool,suppressThreadInfoPanel:a.bool,suppressSearchResults:a.bool,bottomOffset:a.number},calculateState:function(a,c){__p&&__p();var d,e=this;c===void 0&&(c=!1);d=a.activeThreadID||((d=a.activeThread)==null?void 0:d.thread_id);var f=b("MessengerComposerStore").getState();if(a.view===b("MessengerView").DETAIL.COMPOSE){!f.recipients&&i(0,1840);var g=f.recipients;g.size===1?d=b("MercuryIDs").getThreadIDFromUserID(g.first().getUniqueID().toString()):g.size>1&&(d=b("MercuryCanonicalGroupThreadStore").getOrFetch(Array.from(g).map(function(a){return a.getUniqueID().toString()})))}g=this.props.activeThread;d&&!g&&(g=b("MessengerState.bs").getThreadMetaNow(a.viewer,d),!g&&!c&&b("MessengerState.bs").getThreadMeta(a.viewer,d,function(a){g=a}));if(b("gkx")("678586")){c=b("MercuryIDs").getUserIDFromThreadID(d);var h=b("MessengerState.bs").montage(this.props.messengerState);(h[c]===null||h[c]===void 0)&&c!=null&&b("MontageActions").loadMontageThreadForActor(c)}h=b("immutable").Map();this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription);c=g;if(c&&d){var j=c.participants;if(c.is_subscribed){var k=b("MercuryIDs").getParticipantIDFromUserID(a.viewer);j=j.concat([k])}k=b("MessengerParticipants.bs").getMultiEagerMap(j,function(a){e._participantSubscription=null,e.setState({participants:a})});j=k[0];k=k[1];this._participantSubscription=k;h=j;if(b("EventRemindersGating").shouldShowPlansOnMessengerCom){k=c?c.lightweight_event:null;b("EventReminderActions").clearAllReminders(d);if(k){b("EventReminderActions").updateEventReminder(d,k);j=c.lightweight_events;if(j&&Object.keys(j).length>0)for(var l in j)b("EventReminderActions").updateEventReminder(d,j[l],l)}}}k=b("ifRequired")("MessengerUploadFilesStore",function(a){return a.getState()},function(){return b("immutable").Map({})});j=b("ifRequired")("MessengerSharePreviewStore",function(a){return a.getState()},function(){return b("immutable").Map({})});var m=b("ifRequired")("WorkChatContentAppStore",function(a){return a.getState()},function(){return b("immutable").Map({})});this._checkUserThreadUpdatedForStatusSubscription(d);return{infoPanelCollapsed:b("MessengerSettingsStore").getSettings().info_sidebar_collapsed,activeThreadID:d,composerState:f,messengerState:b("MessengerURIStore").getState(),contactData:b("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(h,c),activeThread:c,participants:h,searchResults:b("MessengerThreadSearchStore").getState(),uploadFilesState:k,sharePreviewState:j,workChatContentAppsState:m,hideGroupInfoInThreadInfoPanel:!!a.hideGroupInfoInThreadInfoPanel,hideContextBanner:!!a.hideContextBanner,openPostComposerInSameWindow:!!a.openPostComposerInSameWindow}},getInitialState:function(){return babelHelpers["extends"]({dropTargetOverlayVisible:!1,isCreatingNewGroupChat:!1,newGroupName:""},this.calculateState(this.props,!0))},componentDidMount:function(){__p&&__p();var a=this;this._subscriptionsHandler=new(b("SubscriptionsHandler"))();this._subscribeToSubscriptionsHandler([b("MessengerComposerStore"),b("MessengerSettingsStore"),b("MessengerURIStore"),b("MessengerThreadSearchStore"),b("MercuryCanonicalGroupThreadStore"),b("PresenceStatus")]);b("Bootloader").loadModules(["MessengerUploadFilesStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");b("Bootloader").loadModules(["MessengerSharePreviewStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");b("CurrentUser").isWorkUser()&&b("gkx")("678573")&&b("promiseDone")(b("WorkChatAvailabilityStatusLoader").load(),function(c){c=c.store;a._subscribeToSubscriptionsHandler([c]);var d=b("MercuryIDs").getUserIDFromThreadID(a.state.activeThreadID);d&&c.fetchUsers([d])});b("CurrentUser").isWorkUser()&&b("gkx")("990297")&&b("Bootloader").loadModules(["WorkChatContentAppStore"],function(b){a._subscribeToSubscriptionsHandler([b])},"MessengerDetailView.react");this.setState(this.calculateState(this.props,!1))},_subscribeToSubscriptionsHandler:function(a){var b=this,c=function(){b.setState(b.calculateState(b.props,!1))},d=[];a.forEach(function(a){a.hasChanged&&a.getDispatchToken&&a.addListener?d.push(a.addListener(c)):a.subscribe?d.push(a.subscribe("change",c)):a.addListener?d.push(a.addListener("change",c)):i(0,574)});if(d.length>0){this._subscriptionsHandler&&(a=this._subscriptionsHandler).addSubscriptions.apply(a,d)}},shouldComponentUpdate:function(a,c){return b("shallowCompare")(this,a,c)},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release(),this._subscriptionsHandler=null,this._participantSubscription&&b("MessengerParticipants.bs").removeCallback(this._participantSubscription)},UNSAFE_componentWillReceiveProps:function(a){this.setState(this.calculateState(a,!1)),this.props&&this.props.activeThreadID!==a.activeThreadID&&this._cancelReplyingToMessage(),this.setState(function(c){var d=b("MessengerComposerStore").getState();return a.view!==b("MessengerView").DETAIL.COMPOSE||d.recipients.size<2||c.newGroupName===""?{newGroupName:"",isCreatingNewGroupChat:!1}:{}})},_checkUserThreadUpdatedForStatusSubscription:function(a){if(!b("CurrentUser").isWorkUser()||!b("gkx")("678573")||!b("WorkChatAvailabilityStatusLoader").isLoaded())return;var c=b("WorkChatAvailabilityStatusLoader").getStoreEnforce(),d=this._userIDStatusLiveSubscription;a=b("MercuryIDs").getUserIDFromThreadID(a);a!==d&&(d&&this._userStatusLiveSubscription&&(this._userStatusLiveSubscription.dispose(),this._userStatusLiveSubscription=null),this._userIDStatusLiveSubscription=a,a&&(c.fetchUsers([a]),this._userStatusLiveSubscription=c.liveSubscribe(a)))},_renderMessageView:function(a){var c;this.state.activeThread&&(c=this.props.query==null?l(this.state.activeThread.lightweight_event,a,this.state.participants,this.props.viewer):null);return b("React").createElement("div",{className:"_4_j4"+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj4":""),onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop,role:"presentation"},this._renderGroupNameComposerHeader(),this._renderMainView(a),c,this._renderSearchView(a),this._renderFooterView(a),b("React").createElement("div",{className:(this.state.dropTargetOverlayVisible?"":"hidden_elem")+" _2fg6"}),this._renderUploadFiles(a))},render:function(){var a=this,c=this.state.activeThreadID,d=this.props.DetailViewHeaderComponent;if(this.props.hostProps&&this.props.hostProps.renderMinimal)return this._renderMessageView(c);else{var e=this._getMainLabelDetails();return b("React").createElement("div",{"aria-labelledby":e.labelIDs,className:b("joinClasses")("_1t2u"+(b("MessengerDotComAndInboxM4Check.bs").yes?" _7sli":""),b("cr:895572")),role:"main"},b("React").createElement("div",{className:"hidden_elem",id:j.MAIN_LABEL},e.labelText," "),b("React").createElement(b("CustomColorHighlighting.react"),{className:"_wsc",customColor:b("WorkChatRedesignedMessageListCheck.re").enabled?null:this.state.activeThread&&this.state.activeThread.solid_color},b("React").createElement(d,{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelCollapsed:this.state.infoPanelCollapsed,isWorkUser:this.props.isWorkUser,messengerState:this.props.messengerState,shouldShowCreateGroupButton:b("gkx")("836564")&&this.state.composerState.recipients.size>=2&&c&&!this.state.isCreatingNewGroupChat,onCreateGroupButtonClicked:function(){a.setState({newGroupName:"",isCreatingNewGroupChat:!0})}}),b("React").createElement("div",{className:"_20bp"},this._renderInfoPanel(),this._renderMessageView(c))))}},_renderUploadFiles:function(a){if(!a)return null;var c=this.state.sharePreviewState.get(a);return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerDragAndDrop.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:a,sharePreview:c,onResize:this._handleResize})})},_renderSearchView:function(a){return b("WorkGalahadSettings").isGalahadEnabled?null:a&&!this.props.mid&&this.props.query!=null?b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerThreadSearchContainer.react").__setRef("MessengerDetailView.react"),placeholder:b("React").createElement("div",{className:"_33p7 _5iwm"}),component:b("React").createElement(b("LazyComponent.react"),{loading:this.state.searchResults.loading,query:this.state.searchResults.query,selectedIndex:this.state.searchResults.selectedIndex,totalCount:this.state.searchResults.totalCount})}):null},_renderGroupNameComposerHeader:function(){var a=this;return this._shouldShowGroupNameComposer()?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement("div",null)},b("React").createElement(k,{autoFocus:!b("gkx")("836564")&&this.state.isCreatingNewGroupChat,onChange:function(b){a.setState({newGroupName:b})},onCloseButtonClick:function(){a.setState({isCreatingNewGroupChat:!1})},showCloseButton:this.state.isCreatingNewGroupChat})):null},_assignConversationContainerRef:function(a){this._refsConversationContainer=a},_renderMainView:function(a){if(!a||this._shouldShowGroupNameComposer())return b("React").createElement("div",{className:"_1ut7"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":"")});var c=this.state.contactData?this.state.contactData.contact:null,d=this.props.deliveryReceipts?b("MessengerDeliveryReceipt.bs").getDeliveryTimeOfThread(this.props.deliveryReceipts,a):0;return this.state.searchResults.messages&&this.props.suppressSearchResults!==!0?b("React").createElement(b("MessengerErrorBoundary.react"),{component:"conversation"},b("React").createElement(b("MessengerConversation.react"),{className:"_1wfr"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":""),contact:c,deliveryTimestamp:d,downExhausted:this.state.searchResults.downExhausted,fetchMessages:b("MessengerThreadSearchActions").getMoreSearchContext,onVoiceClipCreate:this.handleAudioUpload,innerClassName:"_1r_-",isCanonical:b("MercuryIDs").isCanonical(a),isLoaded:!0,isLoading:!1,messages:this.state.searchResults.messages,onRead:b("emptyFunction"),onReplyToMessage:this._handleReplyToMessage,readReceipts:this.props.readReceipts,thread:this.state.activeThread,threadID:a,upExhausted:this.state.searchResults.upExhausted,useManualFetch:!0,viewer:this.props.viewer,ref:this._assignConversationContainerRef,selectedMessage:this.state.searchResults.mid,isSearchResult:!!this.state.searchResults.query,hideContextBanner:this.state.hideContextBanner})):b("React").createElement(b("MessengerErrorBoundary.react"),{component:"conversation"},b("React").createElement(b("MessengerConversationContainer.react"),{className:"_1wfr"+(b("WorkChatRedesignedMessageListCheck.re").enabled?" _7w75":"")+(b("MessengerGalahadGating.bs").isGalahadUIEnabled()?" _7pj5":""),contact:c,deliveryTimestamp:d,ignoredIds:b("MessengerState.bs").ignoredIds(this.props.messengerState),fbid:b("MessengerState.bs").fbid(this.props.messengerState),onVoiceClipCreate:this.handleAudioUpload,onMarkRead:this._handleMarkRead,onReplyToMessage:this._handleReplyToMessage,readReceipts:this.props.readReceipts,ref:this._assignConversationContainerRef,thread:this.state.activeThread,threadID:a,viewer:this.props.viewer,hideContextBanner:this.state.hideContextBanner,bottomOffset:this.props.bottomOffset}))},_renderFooterView:function(a){var c=this;return b("React").createElement(b("MessengerErrorBoundary.react"),{className:"_4rv3 _2pen",component:"composer"},b("React").createElement(b("MessengerComposerContainer.react"),{canReply:!!(!this._shouldBlockReply()&&(this.props.view===b("MessengerView").DETAIL.COMPOSE||this.state.activeThread&&b("MercuryThreadInfo").canReply(this.state.activeThread)&&!b("MercuryConfig").ViewerIsReadOnly)),disableAutofocus:b("gkx")("836564")&&this.props.view===b("MessengerView").DETAIL.COMPOSE,fileUploader:this.state.uploadFilesState.get(a),onMount:function(a){return c._composer=a},onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,sharePreview:this.state.sharePreviewState.get(a),workChatContentApps:this.state.workChatContentAppsState.get(a),hostProps:this.props.hostProps,threadID:a,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,replyingToMessage:this.state.replyingToMessage,onCancelReplyingToMessage:this._cancelReplyingToMessage,newGroupName:this.state.newGroupName,openPostComposerInSameWindow:this.state.openPostComposerInSameWindow}))},_renderInfoPanel:function(){var a=this.state,c=a.activeThread,d=a.contactData,e=a.infoPanelCollapsed,f=a.participants;a=a.hideGroupInfoInThreadInfoPanel;var g=this.props,h=g.view;g=g.suppressThreadInfoPanel;return g||!c||!f||h===b("MessengerView").DETAIL.COMPOSE?null:b("React").createElement("div",{className:(e?"hidden_elem":"")+" _4_j5","data-testid":b("MessengerWebDriverTestIDs").INFO_PANEL},b("React").createElement(b("MessengerErrorBoundary.react"),{className:"_4rv3",component:"conversation information"},b("React").createElement(b("MessengerThreadInfoPanelContainer.react"),{blockedIds:this.props.blockedIds,className:"_4_j9",contactData:d,participants:f,thread:c,viewer:this.props.viewer,hideGroupInfoInThreadInfoPanel:a})))},_getMainLabelDetails:function(){return this.props.view===b("MessengerView").DETAIL.COMPOSE?{labelText:h._("\u0e02\u0e49\u0e2d\u0e04\u0e27\u0e32\u0e21\u0e43\u0e2b\u0e21\u0e48"),labelIDs:j.MAIN_LABEL}:{labelText:h._("\u0e01\u0e32\u0e23\u0e2a\u0e19\u0e17\u0e19\u0e32\u0e01\u0e31\u0e1a"),labelIDs:j.MAIN_LABEL+" "+j.THREAD_TITLE}},_handleConversationClick:function(a){__p&&__p();var c=this.props.activeThreadID;if(c&&this._refsConversationContainer&&this._refsConversationContainer.isScrolledToBottom()){var d=b("MessengerState.bs").getThreadMetaNow(this.props.viewer,c);d&&d.unread_count&&d.unread_count>0&&this._handleMarkRead(c)}if(window.getSelection().toString()!=="")return;d=a.target;if(d instanceof Node&&b("Parent").byTag(d,"a")!=null)return;c=this._getComposer();c&&c.focusInput()},handleAudioUpload:function(a){var b=this._getComposer();b!=null&&a!=null&&(b.handleAudioUpload(a),b.focusInput())},_showDropTargetOverlay:function(a){a&&a.preventDefault(),this.setState({dropTargetOverlayVisible:!0})},_hideDropTargetOverlay:function(a){a&&a.preventDefault();this.setState({dropTargetOverlayVisible:!1});a=this._getComposer();a&&a.resetDrag()},_handleDrop:function(a){__p&&__p();this._hideDropTargetOverlay(a);var c=this._getComposer();if(!c)return;a.nativeEvent.dataTransfer instanceof Object||i(0,1841);var d=new(b("DataTransfer"))(a.nativeEvent.dataTransfer),e=d.getFiles(),f=this.state.activeThreadID;if(e.length){b("MessengerActions").prepareFilesForSend(f,a.nativeEvent.dataTransfer.files,"DragAndDrop");return}if(e.length)c.handleFileUpload(e);else{f=d.getText();f&&c.handleTextDropped(f)}},_handleResize:function(){var a=this._refsConversationContainer;a&&a.handleResize()},_handleInfoPanelToggle:function(){var a=!this.state.infoPanelCollapsed;this.setState({infoPanelCollapsed:a},function(){b("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:a})})},_handleMarkRead:function(a){b("MercuryThreadActions").getForFBID(this.props.viewer).markRead(a)},_handleReplyToMessage:function(a){this.setState({replyingToMessage:a})},_cancelReplyingToMessage:function(){this.setState({replyingToMessage:null})},_shouldShowGroupNameComposer:function(){return!b("gkx")("836564")||this.props.view!==b("MessengerView").DETAIL.COMPOSE||this.state.composerState.recipients.size<2?!1:!this.state.activeThread||this.state.isCreatingNewGroupChat},_shouldBlockReply:function(){var a;return!!(((a=this.state.contactData)==null?void 0:(a=a.contact)==null?void 0:a.is_messenger_blocked)||b("MercuryConfig").ColdOpenBlock&&this.state.activeThread&&b("MercuryThreadInfo").isColdOpen(this.state.activeThread))},_getComposer:function(){return this._composer}});c.defaultProps={DetailViewHeaderComponent:b("MessengerDetailViewHeaderContainer.react")};e.exports=c}),null);
__d("LinkWithHiddenURLBar.react",["Link.react","React","ReactDOM","setImmediate"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.link=null,d.$5=function(a){d.link=a},d.$4=function(a){d.$6(),d.props.onFocus&&d.props.onFocus(a)},d.$2=function(a){d.$1(),d.props.onBlur&&d.props.onBlur(a)},d.$3=function(a){d.$6(),!a.metaKey&&d.props.onClick&&(d.props.onClick(a),a.preventDefault()),d.props.onAllClicks&&d.props.onAllClicks(a),b("setImmediate")(function(){return d.$1()})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1()};d.render=function(){var a=this.props,c=a.label;a.onBlur;a.onAllClicks;a.onClick;a.onFocus;a=babelHelpers.objectWithoutPropertiesLoose(a,["label","onBlur","onAllClicks","onClick","onFocus"]);return b("React").createElement(b("Link.react"),babelHelpers["extends"]({},a,{label:c,onBlur:this.$2,onClick:this.$3,onFocus:this.$4,ref:this.$5}))};d.$1=function(){if(this.link){var a=b("ReactDOM").findDOMNode(this.link);a.href&&(a.setAttribute("data-href",a.href),a.removeAttribute("href"))}};d.$6=function(){if(this.link){var a=b("ReactDOM").findDOMNode(this.link),c=a.getAttribute("data-href");c&&(a.setAttribute("href",c),a.removeAttribute("data-href"))}};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerUtilityJitter.react",["React","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(){return Math.random()<.5}var h={display:"none",opacity:"0",width:"0",margin:"0",height:"0",padding:"0",border:"0"};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=document,c=a.body;if(!c)return;a=Math.floor(Math.random()*1e4%4);for(var a=a;a>0;a--)b("setTimeout")(function(){var a=document.createElement("iframe");a.src="about:blank";a.setAttribute("aria-hidden","true");for(var d in h)Object.prototype.hasOwnProperty.call(h,d)&&(a.style[d]=h[d]);c.appendChild(a);g()&&b("setTimeout")(function(){c.removeChild(a)},Math.random()*25)},Math.random()*50)};d.render=function(){return g()?b("React").createElement("iframe",{src:"about:blank",style:h,"aria-hidden":"true"}):b("React").createElement("span",null)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerMount",["cx","BanzaiODS","Bootloader","CSS","CurrentUser","HotLikeSound","MessengerConfig","MessengerDialogs.bs","MessengerEnvironment","MessengerFPSCounter","MessengerNonMount","MessengerPage","MessengerPromotionDataActions","MessengerReact.bs","MessengerSettingsStore","MessengerURIListener","MessengerWebStgTypedLoggerLite","React","ReactDOM","gkx","OrderedFriendsList"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerReact.bs").jsComponent;b("OrderedFriendsList");var i=b("MessengerNonMount").initStoresAndListeners,j=b("MessengerNonMount").dispatchInitialData;a={initStoresAndListeners:i,dispatchInitialData:j,mount:function(a,c,d){__p&&__p();b("MessengerEnvironment").setMessengerUI(!0);b("MessengerPage").emit(b("MessengerPage").Events.JS_LOADED);d=b("CurrentUser").getID();var e=b("CurrentUser").isWorkUser();i(d);b("MessengerURIListener").start();j(d,c);b("MessengerPage").emit(b("MessengerPage").Events.DATA_INITIALIZED);var f=document.documentElement;f&&b("CSS").addClass(f,"_51l0");if(document.body){f=document.body;b("CSS").addClass(f,"_z4_");b("MessengerConfig").SFFontEnabled&&b("CSS").addClass(f,"__6g");b("MessengerConfig").SegoeUIDisabled&&b("CSS").addClass(f,"_2por");b("MessengerEnvironment").facebookdotcom&&b("CSS").addClass(f,"_mvg")}b("HotLikeSound").setCheckSoundEnabledFunc(function(){return b("MessengerSettingsStore").getSettings().sound_enabled});b("ReactDOM").render(b("React").createElement(h,{employeeData:c.employeeData,showWorkchatUpsellBanner:c.showWorkchatUpsellBanner,isFirstRedirect:!b("gkx")("678603"),viewer:d,isWorkUser:e,onMount:function(){return k(c)}}),a);b("MessengerFPSCounter").counter&&b("MessengerFPSCounter").counter(6e4,function(a){b("BanzaiODS").bumpEntityKey(2966,"messenger_dot_com","fps.count."+a)})}};function k(a){__p&&__p();b("MessengerPage").emit(b("MessengerPage").Events.APP_MOUNTED);b("MessengerWebStgTypedLoggerLite").log({event_name:"render_inbox"});var c=a.gameData;c&&c.gameID&&b("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react","InstantGameContextType","QuicksilverSources"],function(a,d,e){var f=null,g=d.SOLO;c.contextSourceID&&(f=c.contextSourceID,g=d.THREAD);b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(a,{initialContextSourceID:f,initialContextType:g,onHide:function(){return b("MessengerDialogs.bs").removeAllDialogs()},initialGameID:c.gameID,initialSource:e.M_ME_LINK,sourceID:null})})},"MessengerMount");a.promotionData&&b("MessengerPromotionDataActions").setPromotionData(a.promotionData)}e.exports=a}),null);
__d("MessengerThreadListGridWrapper.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.label;return b("React").createElement("div",null,b("React").createElement("h2",{className:"accessible_elem"},a),b("React").createElement("ul",{"aria-label":a,role:"grid"},this.props.children))};return c}(b("React").PureComponent);c.propTypes={label:a.string.isRequired};e.exports=c}),null);