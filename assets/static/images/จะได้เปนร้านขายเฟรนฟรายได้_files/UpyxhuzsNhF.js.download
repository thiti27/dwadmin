if (self.CavalryLogger) { CavalryLogger.start_js(["DHfaj"]); }

__d("MessengerRTCCaptureAttachment.react",["cx","fbt","Image.react","React","XUIText.react","gkx"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=3;function a(a){a=a.attachments;var c=a.length;if(c===0||!b("gkx")("925832"))return null;var d=a.slice(0,i),e=a.length-d.length+1;return b("React").createElement("div",{className:"_7_3c"},b("React").createElement("div",{className:"_7_3d"},d.map(function(a,c){return b("React").createElement("div",{className:"_7_3e",key:a.name},b("React").createElement(b("Image.react"),{className:"_7_3f",src:a.preview_url}),c===d.length-1&&e>1?b("React").createElement("div",{className:"_7_3g"},h._("\u0e2d\u0e35\u0e01 {Number of additional undisplayed items}",[h._param("Number of additional undisplayed items",e)])):null)})),b("React").createElement(b("XUIText.react"),{color:"secondary",size:"meta1"},h._({"*":"\u0e16\u0e48\u0e32\u0e22\u0e41\u0e25\u0e49\u0e27 {number} \u0e23\u0e39\u0e1b","_1":"\u0e16\u0e48\u0e32\u0e22\u0e41\u0e25\u0e49\u0e27 1 \u0e23\u0e39\u0e1b"},[h._plural(c,"number")])))}e.exports=a}),null);
__d("MercuryRTCShareAttachment.react",["cx","fbt","ix","CenteredContainer.react","CurrentUser","FBRTCCore","FBRTCLogger","FBRTCSupport","Image.react","MercuryIDs","MercuryLogMessageType","MercuryShareAttachmentRenderLocations","MercuryTimestamp","MercuryViewer","MessengerCallLogEvent","MessengerErrorBoundary.react","MessengerParticipants.bs","MessengerRTCCaptureAttachment.react","MessengerRTCGroupCallParticipantsPickerDialogController","MessengerState.bs","MessengerTextWithEmoticons.react","MNRTCCallabilityStore","React","RTWebLoggingComponent","RTWebLoggingSurface","RTWebUserActionLogger","ShimButton.react","SimpleXUIDialog","VideoCallWebDriverIDs","XUIButton.react","XUIText.react","cxMargin","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MercuryShareAttachmentRenderLocations").CHAT,k=b("MercuryShareAttachmentRenderLocations").MESSENGER;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={peerName:"",isPage:!1,isBlockedPeer:!1},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidMount=function(){var a=this,c=this.props.attachment.log_message_data,d=c.caller,e=c.callee;c=c.thread_id;var f=d===b("MercuryViewer").getID();f=f?e:d;e=this.props.attachment.log_message_type===b("MercuryLogMessageType").PHONE_CALL||this.props.attachment.log_message_type===b("MercuryLogMessageType").GENERIC_ADMIN_TEXT&&this.props.attachment.log_message_data.log_message_type===b("MercuryLogMessageType").PHONE_CALL;b("RTWebUserActionLogger").logImpression({conferenceName:c?"GROUP:"+c:null,callType:b("RTWebUserActionLogger").getCallType(!!c),component:b("RTWebLoggingComponent").START_CALL,surface:b("RTWebLoggingSurface").ADMIN_MESSAGE,mediaType:b("RTWebUserActionLogger").getMediaType(e)});b("MessengerParticipants.bs").get(f,function(b){a.setState({peerName:b.short_name?b.short_name:b.name,isPage:b.type==="page"||a.props.isPageMessage,isBlockedPeer:b.is_facebook_blocked||b.is_messenger_blocked})})};d.render=function(){__p&&__p();var a=this.props.attachment,c=a.log_message_data;a=a.log_message_body;var d=c.caller,e=c.callee,f=c.event||(c.answered?b("MessengerCallLogEvent").ONE_ON_ONE_CALL_ENDED:b("MessengerCallLogEvent").MISSED_CALL),g=d===b("MercuryViewer").getID(),h=f===b("MessengerCallLogEvent").MISSED_CALL;e=g?e:d;d=b("MercuryIDs").getUserIDFromParticipantID(e);e=this.state;var i=e.peerName,l=e.isPage;e=e.isBlockedPeer;var m=b("MercuryTimestamp").getPreciseTimestamp(this.props.attachment.timestamp),n=c.server_info_data,o=c.thread_id;a=b("React").createElement(b("MessengerTextWithEmoticons.react"),{text:a});m=this.$1(!h,g,m);l=!l&&!e;if(this.props.location===j){e=this.$2(d,i,f,g,n,o);return b("React").createElement("div",{className:"_1k2i"},b("React").createElement("div",{className:h&&!g?"_1k2j":""},b("React").createElement(b("XUIText.react"),{weight:"bold"},a),b("React").createElement(b("XUIText.react"),{weight:"bold"},m)),l?b("React").createElement(b("React").Fragment,null,b("React").createElement("hr",null),b("React").createElement(b("CenteredContainer.react"),{vertical:!0,className:"_3-8x"},e)):null)}else if(this.props.location===k){e=this.$2(d,i,f,g,n,o);c=c.call_capture_attachments;return b("React").createElement("div",{className:"_55q _5i_d _52mr"},b("React").createElement("div",{className:(h&&!g?"_1k2j":"")+(l?" _55r":"")},c==null?null:b("React").createElement(b("MessengerErrorBoundary.react"),{component:"attachment"},b("React").createElement(b("MessengerRTCCaptureAttachment.react"),{attachments:c})),b("React").createElement(b("XUIText.react"),{weight:"bold"},a),b("React").createElement(b("XUIText.react"),{weight:"bold"},m)),l?b("React").createElement(b("CenteredContainer.react"),{vertical:!0,className:"_3-8w"},e):null)}c=this.$3(d,i,f,g,n,o);return b("React").createElement("div",null,b("React").createElement("div",{className:(h&&!g?"_1k2j":"")+" _55s"},a),l?b("React").createElement("div",{className:"_55t"},c):null)};d.$1=function(a,c,d){var e=null;!a&&!c?e=i("86815"):c?e=i("86816"):e=i("86813");return b("React").createElement("div",{className:"_2phz"},b("React").createElement(b("Image.react"),{src:e}),b("React").createElement("span",{className:(a||c?"_3ole":"")+" _2pir"},d))};d.$2=function(a,c,d,e,f,g){e=this.$4(d,e,g);if(b("FBRTCSupport").isMobileDevice())return b("React").createElement("span",null,e);else return b("React").createElement(b("ShimButton.react"),{form:"link","data-testID":b("VideoCallWebDriverIDs").RTC_CALL_ACTION_LINK,label:e,onClick:this.$5.bind(this,a,c,d===b("MessengerCallLogEvent").GROUP_CALL_ENDED?null:f,g,d)},e)};d.$3=function(a,c,d,e,f,g){e=this.$4(d,e,g);return b("React").createElement(b("XUIButton.react"),{onClick:this.$5.bind(this,a,c,f,g,d),label:e})};d.$4=function(a,c,d){if(d)if(a===b("MessengerCallLogEvent").GROUP_CALL_ENDED)return h._("\u0e42\u0e17\u0e23\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07");else return h._("\u0e40\u0e02\u0e49\u0e32\u0e23\u0e48\u0e27\u0e21");else if(a===b("MessengerCallLogEvent").MISSED_CALL&&!c)return h._("\u0e42\u0e17\u0e23\u0e01\u0e25\u0e31\u0e1a");else return h._("\u0e42\u0e17\u0e23\u0e2d\u0e35\u0e01\u0e04\u0e23\u0e31\u0e49\u0e07")};d.$5=function(a,c,d,e,f){if(!a&&!e)return;var g=this.props.attachment.log_message_type===b("MercuryLogMessageType").PHONE_CALL||this.props.attachment.log_message_data.log_message_type===b("MercuryLogMessageType").PHONE_CALL;e?(b("RTWebUserActionLogger").logClick({conferenceName:e?"GROUP:"+e:null,callType:b("RTWebUserActionLogger").getCallType(!!e),component:b("RTWebLoggingComponent").START_CALL,surface:b("RTWebLoggingSurface").ADMIN_MESSAGE,mediaType:b("RTWebUserActionLogger").getMediaType(g)}),this.$6(d,e,g,f)):a&&(b("FBRTCCore").isAvailableForWebrtcCalling(a)||b("MNRTCCallabilityStore").isCallable(a))?b("FBRTCCore").startOutgoingCall(a,b("FBRTCLogger").Trigger.ADMIN_MESSAGE,g):b("SimpleXUIDialog").show(h._("\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e15\u0e34\u0e14\u0e15\u0e48\u0e2d {firstname} \u0e44\u0e14\u0e49\u0e43\u0e19\u0e02\u0e13\u0e30\u0e19\u0e35\u0e49",[h._param("firstname",c)]),h._("\u0e44\u0e21\u0e48\u0e2a\u0e32\u0e21\u0e32\u0e23\u0e16\u0e40\u0e0a\u0e37\u0e48\u0e2d\u0e21\u0e15\u0e48\u0e2d\u0e01\u0e32\u0e23\u0e42\u0e17\u0e23"))};d.$6=function(a,c,d,e){__p&&__p();var f=d?a?b("FBRTCLogger").Trigger.MULTIWAY_ADMIN_MESSAGE_JOIN_AUDIO_CALL_BUTTON:b("FBRTCLogger").Trigger.MULTIWAY_ADMIN_MESSAGE_START_AUDIO_CALL_BUTTON:a?b("FBRTCLogger").Trigger.MULTIWAY_ADMIN_MESSAGE_JOIN_VIDEO_CALL_BUTTON:b("FBRTCLogger").Trigger.MULTIWAY_ADMIN_MESSAGE_START_VIDEO_CALL_BUTTON,g=b("CurrentUser").getID();b("MessengerState.bs").getThreadMeta(g,b("MercuryIDs").getThreadIDFromThreadFBID(c),function(h){var i=h.participants?h.participants.filter(function(a){return a!==b("MercuryIDs").getParticipantIDFromUserID(g)}):[];if(i.length>0&&e==b("MessengerCallLogEvent").GROUP_CALL_ENDED)b("MessengerParticipants.bs").getMulti(i,function(a){b("MessengerRTCGroupCallParticipantsPickerDialogController").render({participants:b("immutable").Map(a),thread:h,viewerID:g,trigger:f,conferenceName:"GROUP:"+c,hasVideo:!d})});else{i={conferenceName:"GROUP:"+c,hasVideo:!d,trigger:f,usersToRing:[]};a&&(i.serverInfoData=a);b("FBRTCCore").startGroupCall(i)}})};return c}(b("React").PureComponent);e.exports=a}),null);